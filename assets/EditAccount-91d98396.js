import{r as a,U as E,q as S,j as e,P as D,I as c,B as m,L as F,Q as k,p as U}from"./index-a7cfcc4c.js";import{u as q,c as B}from"./firebaseAuth-9360c38e.js";const _=()=>{const{authUser:r,loadingUser:l,isLoggedIn:N}=a.useContext(E),[u,f]=a.useState(""),[t,p]=a.useState(""),[o,h]=a.useState(""),[n,x]=a.useState(""),[w,i]=a.useState(""),[b,g]=a.useState(""),j=S();a.useEffect(()=>{!l&&r&&(f(r.displayName||""),p(r.displayName||""))},[l,r]);const v=async s=>{s.preventDefault();try{t.trim()!==u&&t.trim()===t?(await q(t),g("Profile updated successfully!")):i("Display name is either unchanged or contains leading/trailing spaces.")}catch(d){i(d.message)}},P=async s=>{if(s.preventDefault(),o===n)return U.info("New password cannot be the same as the old one."),new Error("New password cannot be the same as the old one");try{await B(o,n),g("Password updated successfully!"),h(""),x("")}catch(d){i(d.message)}},C=()=>{j("/account")},y=!t||t===u;return l?e.jsx(D,{}):N?e.jsxs("div",{className:"min-h-screen bg-[#1E1E1E] text-white py-28 px-6",children:[e.jsxs("div",{className:"max-w-lg mx-auto p-8 bg-[#2C2C2C] rounded-md shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Edit Profile"}),w&&e.jsx("p",{className:"mb-4 text-red-500",children:w}),b&&e.jsx("p",{className:"mb-4 text-green-500",children:b}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-lg font-medium mb-2",children:"Display Name"}),e.jsx(c,{type:"text",id:"displayName",value:t,onChange:s=>p(s.target.value),className:"w-full p-3 bg-[#444] border border-[#555] rounded-md text-white",placeholder:"Enter your display name",required:!0})]}),e.jsx(m,{aria_label:y?"Disabled Save Display Name":"Save Display Name",disabled:y,children:"Save Display Name",type:"submit",className:"w-full px-4 py-3 bg-[#4CAF50] text-white rounded-md hover:bg-[#388E3C] transition-colors duration-300"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6 mt-10",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-lg font-medium mb-2",children:"Current Password"}),e.jsx(c,{type:"password",id:"currentPassword",value:o,onChange:s=>h(s.target.value),className:"w-full p-3 bg-[#444] border border-[#555] rounded-md text-white",placeholder:"Enter your current password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-lg font-medium mb-2",children:"New Password"}),e.jsx(c,{type:"password",id:"newPassword",value:n,onChange:s=>x(s.target.value),className:"w-full p-3 bg-[#444] border border-[#555] rounded-md text-white",placeholder:"Enter your new password",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{aria_label:"Change Password",children:"Change Password",type:"submit",className:"px-4 py-3 bg-[#4CAF50] text-white rounded-md hover:bg-[#388E3C] transition-colors duration-300"}),e.jsx(F,{to:"/reset-password",title:"Reset password",children:e.jsx("span",{className:"hover:underline text-sm text-gray-300",children:"Forgot password?"})})]})]}),e.jsx(m,{aria_label:"Cancel",children:"Cancel",onClick:C,className:"mt-8 w-full px-4 py-3 bg-gray-600 text-red-400 rounded-md hover:bg-gray-700 transition-colors duration-300"})]}),e.jsx(k,{position:"bottom-right"})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#1E1E1E] transition-colors duration-300",children:e.jsx("p",{className:"text-lg text-white",children:"Please log in to view your profile."})})};export{_ as default};
