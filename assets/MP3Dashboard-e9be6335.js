import{r as b,j as p,a as Da,b as Fs,c as _a,d as Fa,e as Bs,f as Ls,g as Ba,C as ut,h as La,B as nn,i as Na,_ as z,G as Oa,k as Va,l as ja,m as Ua,n as za,M as Ga,U as Xa,Q as $a,o as _t}from"./index-19c48e4a.js";function Wa(t){if(typeof Proxy>"u")return t;const e=new Map,i=(...n)=>t(...n);return new Proxy(i,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function Tt(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Yt=t=>Array.isArray(t);function Ns(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function ze(t){return typeof t=="string"||Array.isArray(t)}function sn(t){const e=[{},{}];return t==null||t.values.forEach((i,n)=>{e[0][n]=i.get(),e[1][n]=i.getVelocity()}),e}function xi(t,e,i,n){if(typeof e=="function"){const[s,a]=sn(n);e=e(i!==void 0?i:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=sn(n);e=e(i!==void 0?i:t.custom,s,a)}return e}function wt(t,e,i){const n=t.getProps();return xi(n,e,i!==void 0?i:n.custom,t)}const yi=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vi=["initial",...yi],We=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],be=new Set(We),Y=t=>t*1e3,ee=t=>t/1e3,Ka={type:"spring",stiffness:500,damping:25,restSpeed:10},Ha=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qa={type:"keyframes",duration:.8},Ya={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Za=(t,{keyframes:e})=>e.length>2?qa:be.has(t)?t.startsWith("scale")?Ha(e[1]):Ka:Ya;function bi(t,e){return t?t[e]||t.default||t:void 0}const Ja={skipAnimations:!1,useManualTiming:!1},Qa=t=>t!==null;function St(t,{repeat:e,repeatType:i="loop"},n){const s=t.filter(Qa),a=e&&i!=="loop"&&e%2===1?0:s.length-1;return!a||n===void 0?s[a]:n}const O=t=>t;function eo(t){let e=new Set,i=new Set,n=!1,s=!1;const a=new WeakSet;let r={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(c.schedule(u),t()),u(r)}const c={schedule:(u,l=!1,d=!1)=>{const m=d&&n?e:i;return l&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{i.delete(u),a.delete(u)},process:u=>{if(r=u,n){s=!0;return}n=!0,[e,i]=[i,e],i.clear(),e.forEach(o),n=!1,s&&(s=!1,c.process(u))}};return c}const Je=["read","resolveKeyframes","update","preRender","render","postRender"],to=40;function Os(t,e){let i=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>i=!0,r=Je.reduce((x,v)=>(x[v]=eo(a),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:l,render:d,postRender:h}=r,m=()=>{const x=performance.now();i=!1,s.delta=n?1e3/60:Math.max(Math.min(x-s.timestamp,to),1),s.timestamp=x,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),l.process(s),d.process(s),h.process(s),s.isProcessing=!1,i&&e&&(n=!1,t(m))},g=()=>{i=!0,n=!0,s.isProcessing||t(m)};return{schedule:Je.reduce((x,v)=>{const T=r[v];return x[v]=(w,S=!1,P=!1)=>(i||g(),T.schedule(w,S,P)),x},{}),cancel:x=>{for(let v=0;v<Je.length;v++)r[Je[v]].cancel(x)},state:s,steps:r}}const{schedule:M,cancel:oe,state:L,steps:Ft}=Os(typeof requestAnimationFrame<"u"?requestAnimationFrame:O,!0),Vs=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,io=1e-7,no=12;function so(t,e,i,n,s){let a,r,o=0;do r=e+(i-e)/2,a=Vs(r,n,s)-t,a>0?i=r:e=r;while(Math.abs(a)>io&&++o<no);return r}function Ke(t,e,i,n){if(t===e&&i===n)return O;const s=a=>so(a,0,1,t,i);return a=>a===0||a===1?a:Vs(s(a),e,n)}const js=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Us=t=>e=>1-t(1-e),zs=Ke(.33,1.53,.69,.99),Ti=Us(zs),Gs=js(Ti),Xs=t=>(t*=2)<1?.5*Ti(t):.5*(2-Math.pow(2,-10*(t-1))),wi=t=>1-Math.sin(Math.acos(t)),$s=Us(wi),Ws=js(wi),Ks=t=>/^0[^.\s]+$/u.test(t);function ro(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ks(t):!0}let ao=O,Hs=O;const qs=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Ys=t=>e=>typeof e=="string"&&e.startsWith(t),Zs=Ys("--"),oo=Ys("var(--"),Si=t=>oo(t)?co.test(t.split("/*")[0].trim()):!1,co=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uo(t){const e=lo.exec(t);if(!e)return[,];const[,i,n,s]=e;return[`--${i??n}`,s]}function Js(t,e,i=1){const[n,s]=uo(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const r=a.trim();return qs(r)?parseFloat(r):r}return Si(s)?Js(s,e,i+1):s}const ce=(t,e,i)=>i>e?e:i<t?t:i,De={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ge={...De,transform:t=>ce(0,1,t)},Qe={...De,default:1},He=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),re=He("deg"),Z=He("%"),A=He("px"),ho=He("vh"),fo=He("vw"),rn={...Z,parse:t=>Z.parse(t)/100,transform:t=>Z.transform(t*100)},mo=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),an=t=>t===De||t===A,on=(t,e)=>parseFloat(t.split(", ")[e]),cn=(t,e)=>(i,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return on(s[1],e);{const a=n.match(/^matrix\((.+)\)$/u);return a?on(a[1],t):0}},po=new Set(["x","y","z"]),go=We.filter(t=>!po.has(t));function xo(t){const e=[];return go.forEach(i=>{const n=t.getValue(i);n!==void 0&&(e.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))}),e}const Ee={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:cn(4,13),y:cn(5,14)};Ee.translateX=Ee.x;Ee.translateY=Ee.y;const Qs=t=>e=>e.test(t),yo={test:t=>t==="auto",parse:t=>t},er=[De,A,Z,re,fo,ho,yo],ln=t=>er.find(Qs(t)),ye=new Set;let Zt=!1,Jt=!1;function tr(){if(Jt){const t=Array.from(ye).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),i=new Map;e.forEach(n=>{const s=xo(n);s.length&&(i.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=i.get(n);s&&s.forEach(([a,r])=>{var o;(o=n.getValue(a))===null||o===void 0||o.set(r)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Jt=!1,Zt=!1,ye.forEach(t=>t.complete()),ye.clear()}function ir(){ye.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Jt=!0)})}function vo(){ir(),tr()}class Ai{constructor(e,i,n,s,a,r=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=n,this.motionValue=s,this.element=a,this.isAsync=r}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ye.add(this),Zt||(Zt=!0,M.read(ir),M.resolveKeyframes(tr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:n,motionValue:s}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const r=s==null?void 0:s.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&i){const c=n.readValue(i,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),s&&r===void 0&&s.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ye.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ye.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Oe=t=>Math.round(t*1e5)/1e5,Ci=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bo(t){return t==null}const To=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ki=(t,e)=>i=>!!(typeof i=="string"&&To.test(i)&&i.startsWith(t)||e&&!bo(i)&&Object.prototype.hasOwnProperty.call(i,e)),nr=(t,e,i)=>n=>{if(typeof n!="string")return n;const[s,a,r,o]=n.match(Ci);return{[t]:parseFloat(s),[e]:parseFloat(a),[i]:parseFloat(r),alpha:o!==void 0?parseFloat(o):1}},wo=t=>ce(0,255,t),Bt={...De,transform:t=>Math.round(wo(t))},ge={test:ki("rgb","red"),parse:nr("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:n=1})=>"rgba("+Bt.transform(t)+", "+Bt.transform(e)+", "+Bt.transform(i)+", "+Oe(Ge.transform(n))+")"};function So(t){let e="",i="",n="",s="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,i+=i,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Qt={test:ki("#"),parse:So,transform:ge.transform},Se={test:ki("hsl","hue"),parse:nr("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:n=1})=>"hsla("+Math.round(t)+", "+Z.transform(Oe(e))+", "+Z.transform(Oe(i))+", "+Oe(Ge.transform(n))+")"},V={test:t=>ge.test(t)||Qt.test(t)||Se.test(t),parse:t=>ge.test(t)?ge.parse(t):Se.test(t)?Se.parse(t):Qt.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ge.transform(t):Se.transform(t)},Ao=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Co(t){var e,i;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ci))===null||e===void 0?void 0:e.length)||0)+(((i=t.match(Ao))===null||i===void 0?void 0:i.length)||0)>0}const sr="number",rr="color",ko="var",Po="var(",un="${}",Mo=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xe(t){const e=t.toString(),i=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=e.replace(Mo,c=>(V.test(c)?(n.color.push(a),s.push(rr),i.push(V.parse(c))):c.startsWith(Po)?(n.var.push(a),s.push(ko),i.push(c)):(n.number.push(a),s.push(sr),i.push(parseFloat(c))),++a,un)).split(un);return{values:i,split:o,indexes:n,types:s}}function ar(t){return Xe(t).values}function or(t){const{split:e,types:i}=Xe(t),n=e.length;return s=>{let a="";for(let r=0;r<n;r++)if(a+=e[r],s[r]!==void 0){const o=i[r];o===sr?a+=Oe(s[r]):o===rr?a+=V.transform(s[r]):a+=s[r]}return a}}const Eo=t=>typeof t=="number"?0:t;function Io(t){const e=ar(t);return or(t)(e.map(Eo))}const le={test:Co,parse:ar,createTransformer:or,getAnimatableNone:Io},Ro=new Set(["brightness","contrast","saturate","opacity"]);function Do(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=i.match(Ci)||[];if(!n)return t;const s=i.replace(n,"");let a=Ro.has(e)?1:0;return n!==i&&(a*=100),e+"("+a+s+")"}const _o=/\b([a-z-]*)\(.*?\)/gu,ei={...le,getAnimatableNone:t=>{const e=t.match(_o);return e?e.map(Do).join(" "):t}},Fo={borderWidth:A,borderTopWidth:A,borderRightWidth:A,borderBottomWidth:A,borderLeftWidth:A,borderRadius:A,radius:A,borderTopLeftRadius:A,borderTopRightRadius:A,borderBottomRightRadius:A,borderBottomLeftRadius:A,width:A,maxWidth:A,height:A,maxHeight:A,top:A,right:A,bottom:A,left:A,padding:A,paddingTop:A,paddingRight:A,paddingBottom:A,paddingLeft:A,margin:A,marginTop:A,marginRight:A,marginBottom:A,marginLeft:A,backgroundPositionX:A,backgroundPositionY:A},Bo={rotate:re,rotateX:re,rotateY:re,rotateZ:re,scale:Qe,scaleX:Qe,scaleY:Qe,scaleZ:Qe,skew:re,skewX:re,skewY:re,distance:A,translateX:A,translateY:A,translateZ:A,x:A,y:A,z:A,perspective:A,transformPerspective:A,opacity:Ge,originX:rn,originY:rn,originZ:A},dn={...De,transform:Math.round},Pi={...Fo,...Bo,zIndex:dn,size:A,fillOpacity:Ge,strokeOpacity:Ge,numOctaves:dn},Lo={...Pi,color:V,backgroundColor:V,outlineColor:V,fill:V,stroke:V,borderColor:V,borderTopColor:V,borderRightColor:V,borderBottomColor:V,borderLeftColor:V,filter:ei,WebkitFilter:ei},Mi=t=>Lo[t];function cr(t,e){let i=Mi(t);return i!==ei&&(i=le),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const No=new Set(["auto","none","0"]);function Oo(t,e,i){let n=0,s;for(;n<t.length&&!s;){const a=t[n];typeof a=="string"&&!No.has(a)&&Xe(a).values.length&&(s=t[n]),n++}if(s&&i)for(const a of e)t[a]=cr(i,s)}class lr extends Ai{constructor(e,i,n,s,a){super(e,i,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:n}=this;if(!i||!i.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Si(u))){const l=Js(u,i.current);l!==void 0&&(e[c]=l),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!mo.has(n)||e.length!==2)return;const[s,a]=e,r=ln(s),o=ln(a);if(r!==o)if(an(r)&&an(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,n=[];for(let s=0;s<e.length;s++)ro(e[s])&&n.push(s);n.length&&Oo(e,n,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ee[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const s=i[i.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:i,name:n,unresolvedKeyframes:s}=this;if(!i||!i.current)return;const a=i.getValue(n);a&&a.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=Ee[n](i.measureViewportBox(),window.getComputedStyle(i.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{i.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Ei(t){return typeof t=="function"}let at;function Vo(){at=void 0}const J={now:()=>(at===void 0&&J.set(L.isProcessing||Ja.useManualTiming?L.timestamp:performance.now()),at),set:t=>{at=t,queueMicrotask(Vo)}},hn=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(le.test(t)||t==="0")&&!t.startsWith("url("));function jo(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function Uo(t,e,i,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],r=hn(s,e),o=hn(a,e);return!r||!o?!1:jo(t)||(i==="spring"||Ei(i))&&n}const zo=40;class ur{constructor({autoplay:e=!0,delay:i=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:r="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=J.now(),this.options={autoplay:e,delay:i,type:n,repeat:s,repeatDelay:a,repeatType:r,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zo?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&vo(),this._resolved}onKeyframesResolved(e,i){this.resolvedAt=J.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:a,delay:r,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!Uo(e,n,s,a))if(r)this.options.duration=0;else{c==null||c(St(e,this.options,i)),o==null||o(),this.resolveFinishedPromise();return}const l=this.initPlayback(e,i);l!==!1&&(this._resolved={keyframes:e,finalKeyframe:i,...l},this.onPostResolved())}onPostResolved(){}then(e,i){return this.currentFinishedPromise.then(e,i)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function dr(t,e){return e?t*(1e3/e):0}const Go=5;function hr(t,e,i){const n=Math.max(e-Go,0);return dr(i-t(n),e-n)}const Lt=.001,Xo=.01,fn=10,$o=.05,Wo=1;function Ko({duration:t=800,bounce:e=.25,velocity:i=0,mass:n=1}){let s,a;ao(t<=Y(fn));let r=1-e;r=ce($o,Wo,r),t=ce(Xo,fn,ee(t)),r<1?(s=u=>{const l=u*r,d=l*t,h=l-i,m=ti(u,r),g=Math.exp(-d);return Lt-h/m*g},a=u=>{const d=u*r*t,h=d*i+i,m=Math.pow(r,2)*Math.pow(u,2)*t,g=Math.exp(-d),f=ti(Math.pow(u,2),r);return(-s(u)+Lt>0?-1:1)*((h-m)*g)/f}):(s=u=>{const l=Math.exp(-u*t),d=(u-i)*t+1;return-Lt+l*d},a=u=>{const l=Math.exp(-u*t),d=(i-u)*(t*t);return l*d});const o=5/t,c=qo(s,a,o);if(t=Y(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:r*2*Math.sqrt(n*u),duration:t}}}const Ho=12;function qo(t,e,i){let n=i;for(let s=1;s<Ho;s++)n=n-t(n)/e(n);return n}function ti(t,e){return t*Math.sqrt(1-e*e)}const Yo=["duration","bounce"],Zo=["stiffness","damping","mass"];function mn(t,e){return e.some(i=>t[i]!==void 0)}function Jo(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!mn(t,Zo)&&mn(t,Yo)){const i=Ko(t);e={...e,...i,mass:1},e.isResolvedFromDuration=!0}return e}function fr({keyframes:t,restDelta:e,restSpeed:i,...n}){const s=t[0],a=t[t.length-1],r={done:!1,value:s},{stiffness:o,damping:c,mass:u,duration:l,velocity:d,isResolvedFromDuration:h}=Jo({...n,velocity:-ee(n.velocity||0)}),m=d||0,g=c/(2*Math.sqrt(o*u)),f=a-s,y=ee(Math.sqrt(o/u)),x=Math.abs(f)<5;i||(i=x?.01:2),e||(e=x?.005:.5);let v;if(g<1){const T=ti(y,g);v=w=>{const S=Math.exp(-g*y*w);return a-S*((m+g*y*f)/T*Math.sin(T*w)+f*Math.cos(T*w))}}else if(g===1)v=T=>a-Math.exp(-y*T)*(f+(m+y*f)*T);else{const T=y*Math.sqrt(g*g-1);v=w=>{const S=Math.exp(-g*y*w),P=Math.min(T*w,300);return a-S*((m+g*y*f)*Math.sinh(P)+T*f*Math.cosh(P))/T}}return{calculatedDuration:h&&l||null,next:T=>{const w=v(T);if(h)r.done=T>=l;else{let S=0;g<1&&(S=T===0?Y(m):hr(v,T,w));const P=Math.abs(S)<=i,D=Math.abs(a-w)<=e;r.done=P&&D}return r.value=r.done?a:w,r}}}function pn({keyframes:t,velocity:e=0,power:i=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:r,min:o,max:c,restDelta:u=.5,restSpeed:l}){const d=t[0],h={done:!1,value:d},m=k=>o!==void 0&&k<o||c!==void 0&&k>c,g=k=>o===void 0?c:c===void 0||Math.abs(o-k)<Math.abs(c-k)?o:c;let f=i*e;const y=d+f,x=r===void 0?y:r(y);x!==y&&(f=x-d);const v=k=>-f*Math.exp(-k/n),T=k=>x+v(k),w=k=>{const F=v(k),U=T(k);h.done=Math.abs(F)<=u,h.value=h.done?x:U};let S,P;const D=k=>{m(h.value)&&(S=k,P=fr({keyframes:[h.value,g(h.value)],velocity:hr(T,k,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:l}))};return D(0),{calculatedDuration:null,next:k=>{let F=!1;return!P&&S===void 0&&(F=!0,w(k),D(k)),S!==void 0&&k>=S?P.next(k-S):(!F&&w(k),h)}}}const Qo=Ke(.42,0,1,1),ec=Ke(0,0,.58,1),mr=Ke(.42,0,.58,1),tc=t=>Array.isArray(t)&&typeof t[0]!="number",Ii=t=>Array.isArray(t)&&typeof t[0]=="number",ic={linear:O,easeIn:Qo,easeInOut:mr,easeOut:ec,circIn:wi,circInOut:Ws,circOut:$s,backIn:Ti,backInOut:Gs,backOut:zs,anticipate:Xs},gn=t=>{if(Ii(t)){Hs(t.length===4);const[e,i,n,s]=t;return Ke(e,i,n,s)}else if(typeof t=="string")return ic[t];return t},nc=(t,e)=>i=>e(t(i)),te=(...t)=>t.reduce(nc),Ie=(t,e,i)=>{const n=e-t;return n===0?1:(i-t)/n},E=(t,e,i)=>t+(e-t)*i;function Nt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function sc({hue:t,saturation:e,lightness:i,alpha:n}){t/=360,e/=100,i/=100;let s=0,a=0,r=0;if(!e)s=a=r=i;else{const o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;s=Nt(c,o,t+1/3),a=Nt(c,o,t),r=Nt(c,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(r*255),alpha:n}}function dt(t,e){return i=>i>0?e:t}const Ot=(t,e,i)=>{const n=t*t,s=i*(e*e-n)+n;return s<0?0:Math.sqrt(s)},rc=[Qt,ge,Se],ac=t=>rc.find(e=>e.test(t));function xn(t){const e=ac(t);if(!e)return!1;let i=e.parse(t);return e===Se&&(i=sc(i)),i}const yn=(t,e)=>{const i=xn(t),n=xn(e);if(!i||!n)return dt(t,e);const s={...i};return a=>(s.red=Ot(i.red,n.red,a),s.green=Ot(i.green,n.green,a),s.blue=Ot(i.blue,n.blue,a),s.alpha=E(i.alpha,n.alpha,a),ge.transform(s))},ii=new Set(["none","hidden"]);function oc(t,e){return ii.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function cc(t,e){return i=>E(t,e,i)}function Ri(t){return typeof t=="number"?cc:typeof t=="string"?Si(t)?dt:V.test(t)?yn:dc:Array.isArray(t)?pr:typeof t=="object"?V.test(t)?yn:lc:dt}function pr(t,e){const i=[...t],n=i.length,s=t.map((a,r)=>Ri(a)(a,e[r]));return a=>{for(let r=0;r<n;r++)i[r]=s[r](a);return i}}function lc(t,e){const i={...t,...e},n={};for(const s in i)t[s]!==void 0&&e[s]!==void 0&&(n[s]=Ri(t[s])(t[s],e[s]));return s=>{for(const a in n)i[a]=n[a](s);return i}}function uc(t,e){var i;const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const r=e.types[a],o=t.indexes[r][s[r]],c=(i=t.values[o])!==null&&i!==void 0?i:0;n[a]=c,s[r]++}return n}const dc=(t,e)=>{const i=le.createTransformer(e),n=Xe(t),s=Xe(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?ii.has(t)&&!s.values.length||ii.has(e)&&!n.values.length?oc(t,e):te(pr(uc(n,s),s.values),i):dt(t,e)};function gr(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?E(t,e,i):Ri(t)(t,e)}function hc(t,e,i){const n=[],s=i||gr,a=t.length-1;for(let r=0;r<a;r++){let o=s(t[r],t[r+1]);if(e){const c=Array.isArray(e)?e[r]||O:e;o=te(c,o)}n.push(o)}return n}function fc(t,e,{clamp:i=!0,ease:n,mixer:s}={}){const a=t.length;if(Hs(a===e.length),a===1)return()=>e[0];if(a===2&&t[0]===t[1])return()=>e[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const r=hc(e,n,s),o=r.length,c=u=>{let l=0;if(o>1)for(;l<t.length-2&&!(u<t[l+1]);l++);const d=Ie(t[l],t[l+1],u);return r[l](d)};return i?u=>c(ce(t[0],t[a-1],u)):c}function mc(t,e){const i=t[t.length-1];for(let n=1;n<=e;n++){const s=Ie(0,e,n);t.push(E(i,1,s))}}function pc(t){const e=[0];return mc(e,t.length-1),e}function gc(t,e){return t.map(i=>i*e)}function xc(t,e){return t.map(()=>e||mr).splice(0,t.length-1)}function ht({duration:t=300,keyframes:e,times:i,ease:n="easeInOut"}){const s=tc(n)?n.map(gn):gn(n),a={done:!1,value:e[0]},r=gc(i&&i.length===e.length?i:pc(e),t),o=fc(r,e,{ease:Array.isArray(s)?s:xc(e,s)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const vn=2e4;function yc(t){let e=0;const i=50;let n=t.next(e);for(;!n.done&&e<vn;)e+=i,n=t.next(e);return e>=vn?1/0:e}const vc=t=>{const e=({timestamp:i})=>t(i);return{start:()=>M.update(e,!0),stop:()=>oe(e),now:()=>L.isProcessing?L.timestamp:J.now()}},bc={decay:pn,inertia:pn,tween:ht,keyframes:ht,spring:fr},Tc=t=>t/100;class Di extends ur{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:i,motionValue:n,element:s,keyframes:a}=this.options,r=(s==null?void 0:s.KeyframeResolver)||Ai,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new r(a,o,i,n,s),this.resolver.scheduleResolve()}initPlayback(e){const{type:i="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:r=0}=this.options,o=Ei(i)?i:bc[i]||ht;let c,u;o!==ht&&typeof e[0]!="number"&&(c=te(Tc,gr(e[0],e[1])),e=[0,100]);const l=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-r})),l.calculatedDuration===null&&(l.calculatedDuration=yc(l));const{calculatedDuration:d}=l,h=d+s,m=h*(n+1)-s;return{generator:l,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:d,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,i=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:r,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:l,resolvedDuration:d}=n;if(this.startTime===null)return a.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:f,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),i?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?x<0:x>l;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let T=this.currentTime,w=a;if(m){const k=Math.min(this.currentTime,l)/d;let F=Math.floor(k),U=k%1;!U&&k>=1&&(U=1),U===1&&F--,F=Math.min(F,m+1),!!(F%2)&&(g==="reverse"?(U=1-U,f&&(U-=f/d)):g==="mirror"&&(w=r)),T=ce(0,1,U)*d}const S=v?{done:!1,value:c[0]}:w.next(T);o&&(S.value=o(S.value));let{done:P}=S;!v&&u!==null&&(P=this.speed>=0?this.currentTime>=l:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return D&&s!==void 0&&(S.value=St(c,this.options,s)),y&&y(S.value),D&&this.finish(),S}get duration(){const{resolved:e}=this;return e?ee(e.calculatedDuration):0}get time(){return ee(this.currentTime)}set time(e){e=Y(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=ee(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vc,onPlay:i,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),i&&i();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const wc=new Set(["opacity","clipPath","filter","transform"]),Sc=10,Ac=(t,e)=>{let i="";const n=Math.max(Math.round(e/Sc),2);for(let s=0;s<n;s++)i+=t(Ie(0,n-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function _i(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cc={linearEasing:void 0};function kc(t,e){const i=_i(t);return()=>{var n;return(n=Cc[e])!==null&&n!==void 0?n:i()}}const ft=kc(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function xr(t){return!!(typeof t=="function"&&ft()||!t||typeof t=="string"&&(t in ni||ft())||Ii(t)||Array.isArray(t)&&t.every(xr))}const Fe=([t,e,i,n])=>`cubic-bezier(${t}, ${e}, ${i}, ${n})`,ni={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fe([0,.65,.55,1]),circOut:Fe([.55,0,1,.45]),backIn:Fe([.31,.01,.66,-.59]),backOut:Fe([.33,1.53,.69,.99])};function yr(t,e){if(t)return typeof t=="function"&&ft()?Ac(t,e):Ii(t)?Fe(t):Array.isArray(t)?t.map(i=>yr(i,e)||ni.easeOut):ni[t]}function Pc(t,e,i,{delay:n=0,duration:s=300,repeat:a=0,repeatType:r="loop",ease:o,times:c}={}){const u={[e]:i};c&&(u.offset=c);const l=yr(o,s);return Array.isArray(l)&&(u.easing=l),t.animate(u,{delay:n,duration:s,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:a+1,direction:r==="reverse"?"alternate":"normal"})}function bn(t,e){t.timeline=e,t.onfinish=null}const Mc=_i(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mt=10,Ec=2e4;function Ic(t){return Ei(t.type)||t.type==="spring"||!xr(t.ease)}function Rc(t,e){const i=new Di({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let a=0;for(;!n.done&&a<Ec;)n=i.sample(a),s.push(n.value),a+=mt;return{times:void 0,keyframes:s,duration:a-mt,ease:"linear"}}const vr={anticipate:Xs,backInOut:Gs,circInOut:Ws};function Dc(t){return t in vr}class Tn extends ur{constructor(e){super(e);const{name:i,motionValue:n,element:s,keyframes:a}=this.options;this.resolver=new lr(a,(r,o)=>this.onKeyframesResolved(r,o),i,n,s),this.resolver.scheduleResolve()}initPlayback(e,i){var n;let{duration:s=300,times:a,ease:r,type:o,motionValue:c,name:u,startTime:l}=this.options;if(!(!((n=c.owner)===null||n===void 0)&&n.current))return!1;if(typeof r=="string"&&ft()&&Dc(r)&&(r=vr[r]),Ic(this.options)){const{onComplete:h,onUpdate:m,motionValue:g,element:f,...y}=this.options,x=Rc(e,y);e=x.keyframes,e.length===1&&(e[1]=e[0]),s=x.duration,a=x.times,r=x.ease,o="keyframes"}const d=Pc(c.owner.current,u,e,{...this.options,duration:s,times:a,ease:r});return d.startTime=l??this.calcStartTime(),this.pendingTimeline?(bn(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;c.set(St(e,this.options,i)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:s,times:a,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:i}=e;return ee(i)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:i}=e;return ee(i.currentTime||0)}set time(e){const{resolved:i}=this;if(!i)return;const{animation:n}=i;n.currentTime=Y(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:i}=e;return i.playbackRate}set speed(e){const{resolved:i}=this;if(!i)return;const{animation:n}=i;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:i}=e;return i.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:i}=e;return i.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:i}=this;if(!i)return O;const{animation:n}=i;bn(n,e)}return O}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:i,keyframes:n,duration:s,type:a,ease:r,times:o}=e;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:l,onComplete:d,element:h,...m}=this.options,g=new Di({...m,keyframes:n,duration:s,type:a,ease:r,times:o,isGenerator:!0}),f=Y(this.time);u.setWithVelocity(g.sample(f-mt).value,g.sample(f).value,mt)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:i,name:n,repeatDelay:s,repeatType:a,damping:r,type:o}=e;return Mc()&&n&&wc.has(n)&&i&&i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate&&!s&&a!=="mirror"&&r!==0&&o!=="inertia"}}const _c=_i(()=>window.ScrollTimeline!==void 0);class Fc{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,i){return Promise.all(this.animations).then(e).catch(i)}getAll(e){return this.animations[0][e]}setAll(e,i){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=i}attachTimeline(e,i){const n=this.animations.map(s=>_c()&&s.attachTimeline?s.attachTimeline(e):i(s));return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let i=0;i<this.animations.length;i++)e=Math.max(e,this.animations[i].duration);return e}runAll(e){this.animations.forEach(i=>i[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Bc({when:t,delay:e,delayChildren:i,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:r,repeatDelay:o,from:c,elapsed:u,...l}){return!!Object.keys(l).length}const Fi=(t,e,i,n={},s,a)=>r=>{const o=bi(n,t)||{},c=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Y(c);let l={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{r(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:s};Bc(o)||(l={...l,...Za(t,l)}),l.duration&&(l.duration=Y(l.duration)),l.repeatDelay&&(l.repeatDelay=Y(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let d=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(l.duration=0,l.delay===0&&(d=!0)),d&&!a&&e.get()!==void 0){const h=St(l.keyframes,o);if(h!==void 0)return M.update(()=>{l.onUpdate(h),l.onComplete()}),new Fc([])}return!a&&Tn.supports(l)?new Tn(l):new Di(l)},Lc=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Nc=t=>Yt(t)?t[t.length-1]||0:t;function Bi(t,e){t.indexOf(e)===-1&&t.push(e)}function Li(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class Ni{constructor(){this.subscriptions=[]}add(e){return Bi(this.subscriptions,e),()=>Li(this.subscriptions,e)}notify(e,i,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,i,n);else for(let a=0;a<s;a++){const r=this.subscriptions[a];r&&r(e,i,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wn=30,Oc=t=>!isNaN(parseFloat(t));class Vc{constructor(e,i={}){this.version="11.11.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const a=J.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=J.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Oc(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new Ni);const n=this.events[e].add(i);return e==="change"?()=>{n(),M.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e,i=!0){!i||!this.passiveEffect?this.updateAndNotify(e,i):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,i,n){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=J.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wn)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,wn);return dr(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $e(t,e){return new Vc(t,e)}function jc(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,$e(i))}function Uc(t,e){const i=wt(t,e);let{transitionEnd:n={},transition:s={},...a}=i||{};a={...a,...n};for(const r in a){const o=Nc(a[r]);jc(t,r,o)}}const Oi=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zc="framerAppearId",br="data-"+Oi(zc);function Tr(t){return t.props[br]}const j=t=>!!(t&&t.getVelocity);function Gc(t){return!!(j(t)&&t.add)}function si(t,e){const i=t.getValue("willChange");if(Gc(i))return i.add(e)}function Xc({protectedKeys:t,needsAnimating:e},i){const n=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,n}function wr(t,e,{delay:i=0,transitionOverride:n,type:s}={}){var a;let{transition:r=t.getDefaultTransition(),transitionEnd:o,...c}=e;n&&(r=n);const u=[],l=s&&t.animationState&&t.animationState.getState()[s];for(const d in c){const h=t.getValue(d,(a=t.latestValues[d])!==null&&a!==void 0?a:null),m=c[d];if(m===void 0||l&&Xc(l,d))continue;const g={delay:i,...bi(r||{},d)};let f=!1;if(window.MotionHandoffAnimation){const x=Tr(t);if(x){const v=window.MotionHandoffAnimation(x,d,M);v!==null&&(g.startTime=v,f=!0)}}si(t,d),h.start(Fi(d,h,m,t.shouldReduceMotion&&be.has(d)?{type:!1}:g,t,f));const y=h.animation;y&&u.push(y)}return o&&Promise.all(u).then(()=>{M.update(()=>{o&&Uc(t,o)})}),u}function ri(t,e,i={}){var n;const s=wt(t,e,i.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};i.transitionOverride&&(a=i.transitionOverride);const r=s?()=>Promise.all(wr(t,s,i)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:d,staggerDirection:h}=a;return $c(t,e,l+u,d,h,i)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,l]=c==="beforeChildren"?[r,o]:[o,r];return u().then(()=>l())}else return Promise.all([r(),o(i.delay)])}function $c(t,e,i=0,n=0,s=1,a){const r=[],o=(t.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>o-u*n;return Array.from(t.variantChildren).sort(Wc).forEach((u,l)=>{u.notify("AnimationStart",e),r.push(ri(u,e,{...a,delay:i+c(l)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(r)}function Wc(t,e){return t.sortNodePosition(e)}function Kc(t,e,i={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(a=>ri(t,a,i));n=Promise.all(s)}else if(typeof e=="string")n=ri(t,e,i);else{const s=typeof e=="function"?wt(t,e,i.custom):e;n=Promise.all(wr(t,s,i))}return n.then(()=>{t.notify("AnimationComplete",e)})}const Hc=vi.length;function Sr(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?Sr(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<Hc;i++){const n=vi[i],s=t.props[n];(ze(s)||s===!1)&&(e[n]=s)}return e}const qc=[...yi].reverse(),Yc=yi.length;function Zc(t){return e=>Promise.all(e.map(({animation:i,options:n})=>Kc(t,i,n)))}function Jc(t){let e=Zc(t),i=Sn(),n=!0;const s=c=>(u,l)=>{var d;const h=wt(t,l,c==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:m,transitionEnd:g,...f}=h;u={...u,...f,...g}}return u};function a(c){e=c(t)}function r(c){const{props:u}=t,l=Sr(t.parent)||{},d=[],h=new Set;let m={},g=1/0;for(let y=0;y<Yc;y++){const x=qc[y],v=i[x],T=u[x]!==void 0?u[x]:l[x],w=ze(T),S=x===c?v.isActive:null;S===!1&&(g=y);let P=T===l[x]&&T!==u[x]&&w;if(P&&n&&t.manuallyAnimateOnMount&&(P=!1),v.protectedKeys={...m},!v.isActive&&S===null||!T&&!v.prevProp||Tt(T)||typeof T=="boolean")continue;const D=Qc(v.prevProp,T);let k=D||x===c&&v.isActive&&!P&&w||y>g&&w,F=!1;const U=Array.isArray(T)?T:[T];let ne=U.reduce(s(x),{});S===!1&&(ne={});const{prevResolvedValues:Te={}}=v,Rt={...Te,...ne},Ze=B=>{k=!0,h.has(B)&&(F=!0,h.delete(B)),v.needsAnimating[B]=!0;const _=t.getValue(B);_&&(_.liveStyle=!1)};for(const B in Rt){const _=ne[B],se=Te[B];if(m.hasOwnProperty(B))continue;let Dt=!1;Yt(_)&&Yt(se)?Dt=!Ns(_,se):Dt=_!==se,Dt?_!=null?Ze(B):h.add(B):_!==void 0&&h.has(B)?Ze(B):v.protectedKeys[B]=!0}v.prevProp=T,v.prevResolvedValues=ne,v.isActive&&(m={...m,...ne}),n&&t.blockInitialAnimation&&(k=!1),k&&(!(P&&D)||F)&&d.push(...U.map(B=>({animation:B,options:{type:x}})))}if(h.size){const y={};h.forEach(x=>{const v=t.getBaseTarget(x),T=t.getValue(x);T&&(T.liveStyle=!0),y[x]=v??null}),d.push({animation:y})}let f=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(f=!1),n=!1,f?e(d):Promise.resolve()}function o(c,u){var l;if(i[c].isActive===u)return Promise.resolve();(l=t.variantChildren)===null||l===void 0||l.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),i[c].isActive=u;const d=r(c);for(const h in i)i[h].protectedKeys={};return d}return{animateChanges:r,setActive:o,setAnimateFunction:a,getState:()=>i,reset:()=>{i=Sn(),n=!0}}}function Qc(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ns(e,t):!1}function de(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sn(){return{animate:de(!0),whileInView:de(),whileHover:de(),whileTap:de(),whileDrag:de(),whileFocus:de(),exit:de()}}class ue{constructor(e){this.isMounted=!1,this.node=e}update(){}}class el extends ue{constructor(e){super(e),e.animationState||(e.animationState=Jc(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let tl=0;class il extends ue{constructor(){super(...arguments),this.id=tl++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);i&&!e&&s.then(()=>i(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nl={animation:{Feature:el},exit:{Feature:il}},Ar=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function At(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const sl=t=>e=>Ar(e)&&t(e,At(e));function Q(t,e,i,n={passive:!0}){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i)}function ie(t,e,i,n){return Q(t,e,sl(i),n)}const An=(t,e)=>Math.abs(t-e);function rl(t,e){const i=An(t.x,e.x),n=An(t.y,e.y);return Math.sqrt(i**2+n**2)}class Cr{constructor(e,i,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=jt(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=rl(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=d,{timestamp:f}=L;this.history.push({...g,timestamp:f});const{onStart:y,onMove:x}=this.handlers;h||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Vt(h,this.transformPagePoint),M.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=jt(d.type==="pointercancel"?this.lastMoveEventInfo:Vt(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,y),g&&g(d,y)},!Ar(e))return;this.dragSnapToOrigin=a,this.handlers=i,this.transformPagePoint=n,this.contextWindow=s||window;const r=At(e),o=Vt(r,this.transformPagePoint),{point:c}=o,{timestamp:u}=L;this.history=[{...c,timestamp:u}];const{onSessionStart:l}=i;l&&l(e,jt(o,this.history)),this.removeListeners=te(ie(this.contextWindow,"pointermove",this.handlePointerMove),ie(this.contextWindow,"pointerup",this.handlePointerUp),ie(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),oe(this.updatePoint)}}function Vt(t,e){return e?{point:e(t.point)}:t}function Cn(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jt({point:t},e){return{point:t,delta:Cn(t,kr(e)),offset:Cn(t,al(e)),velocity:ol(e,.1)}}function al(t){return t[0]}function kr(t){return t[t.length-1]}function ol(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,n=null;const s=kr(t);for(;i>=0&&(n=t[i],!(s.timestamp-n.timestamp>Y(e)));)i--;if(!n)return{x:0,y:0};const a=ee(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const r={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function Pr(t){let e=null;return()=>{const i=()=>{e=null};return e===null?(e=t,i):!1}}const kn=Pr("dragHorizontal"),Pn=Pr("dragVertical");function Mr(t){let e=!1;if(t==="y")e=Pn();else if(t==="x")e=kn();else{const i=kn(),n=Pn();i&&n?e=()=>{i(),n()}:(i&&i(),n&&n())}return e}function Er(){const t=Mr(!0);return t?(t(),!1):!0}function Ae(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const Ir=1e-4,cl=1-Ir,ll=1+Ir,Rr=.01,ul=0-Rr,dl=0+Rr;function $(t){return t.max-t.min}function hl(t,e,i){return Math.abs(t-e)<=i}function Mn(t,e,i,n=.5){t.origin=n,t.originPoint=E(e.min,e.max,t.origin),t.scale=$(i)/$(e),t.translate=E(i.min,i.max,t.origin)-t.originPoint,(t.scale>=cl&&t.scale<=ll||isNaN(t.scale))&&(t.scale=1),(t.translate>=ul&&t.translate<=dl||isNaN(t.translate))&&(t.translate=0)}function Ve(t,e,i,n){Mn(t.x,e.x,i.x,n?n.originX:void 0),Mn(t.y,e.y,i.y,n?n.originY:void 0)}function En(t,e,i){t.min=i.min+e.min,t.max=t.min+$(e)}function fl(t,e,i){En(t.x,e.x,i.x),En(t.y,e.y,i.y)}function In(t,e,i){t.min=e.min-i.min,t.max=t.min+$(e)}function je(t,e,i){In(t.x,e.x,i.x),In(t.y,e.y,i.y)}function ml(t,{min:e,max:i},n){return e!==void 0&&t<e?t=n?E(e,t,n.min):Math.max(t,e):i!==void 0&&t>i&&(t=n?E(i,t,n.max):Math.min(t,i)),t}function Rn(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function pl(t,{top:e,left:i,bottom:n,right:s}){return{x:Rn(t.x,i,s),y:Rn(t.y,e,n)}}function Dn(t,e){let i=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,n]=[n,i]),{min:i,max:n}}function gl(t,e){return{x:Dn(t.x,e.x),y:Dn(t.y,e.y)}}function xl(t,e){let i=.5;const n=$(t),s=$(e);return s>n?i=Ie(e.min,e.max-n,t.min):n>s&&(i=Ie(t.min,t.max-s,e.min)),ce(0,1,i)}function yl(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const ai=.35;function vl(t=ai){return t===!1?t=0:t===!0&&(t=ai),{x:_n(t,"left","right"),y:_n(t,"top","bottom")}}function _n(t,e,i){return{min:Fn(t,e),max:Fn(t,i)}}function Fn(t,e){return typeof t=="number"?t:t[e]||0}const Bn=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ce=()=>({x:Bn(),y:Bn()}),Ln=()=>({min:0,max:0}),I=()=>({x:Ln(),y:Ln()});function H(t){return[t("x"),t("y")]}function Dr({top:t,left:e,right:i,bottom:n}){return{x:{min:e,max:i},y:{min:t,max:n}}}function bl({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tl(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}function Ut(t){return t===void 0||t===1}function oi({scale:t,scaleX:e,scaleY:i}){return!Ut(t)||!Ut(e)||!Ut(i)}function me(t){return oi(t)||_r(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _r(t){return Nn(t.x)||Nn(t.y)}function Nn(t){return t&&t!=="0%"}function pt(t,e,i){const n=t-i,s=e*n;return i+s}function On(t,e,i,n,s){return s!==void 0&&(t=pt(t,s,n)),pt(t,i,n)+e}function ci(t,e=0,i=1,n,s){t.min=On(t.min,e,i,n,s),t.max=On(t.max,e,i,n,s)}function Fr(t,{x:e,y:i}){ci(t.x,e.translate,e.scale,e.originPoint),ci(t.y,i.translate,i.scale,i.originPoint)}const Vn=.999999999999,jn=1.0000000000001;function wl(t,e,i,n=!1){const s=i.length;if(!s)return;e.x=e.y=1;let a,r;for(let o=0;o<s;o++){a=i[o],r=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Pe(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),r&&(e.x*=r.x.scale,e.y*=r.y.scale,Fr(t,r)),n&&me(a.latestValues)&&Pe(t,a.latestValues))}e.x<jn&&e.x>Vn&&(e.x=1),e.y<jn&&e.y>Vn&&(e.y=1)}function ke(t,e){t.min=t.min+e,t.max=t.max+e}function Un(t,e,i,n,s=.5){const a=E(t.min,t.max,s);ci(t,e,i,a,n)}function Pe(t,e){Un(t.x,e.x,e.scaleX,e.scale,e.originX),Un(t.y,e.y,e.scaleY,e.scale,e.originY)}function Br(t,e){return Dr(Tl(t.getBoundingClientRect(),e))}function Sl(t,e,i){const n=Br(t,i),{scroll:s}=e;return s&&(ke(n.x,s.offset.x),ke(n.y,s.offset.y)),n}const Lr=({current:t})=>t?t.ownerDocument.defaultView:null,Al=new WeakMap;class Cl{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=I(),this.visualElement=e}start(e,{snapToCursor:i=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=l=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(At(l,"page").point)},a=(l,d)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Mr(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),H(y=>{let x=this.getAxisMotionValue(y).get()||0;if(Z.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const T=v.layout.layoutBox[y];T&&(x=$(T)*(parseFloat(x)/100))}}this.originPoint[y]=x}),g&&M.postRender(()=>g(l,d)),si(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},r=(l,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:f}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=d;if(m&&this.currentDirection===null){this.currentDirection=kl(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),f&&f(l,d)},o=(l,d)=>this.stop(l,d),c=()=>H(l=>{var d;return this.getAnimationState(l)==="paused"&&((d=this.getAxisMotionValue(l).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Cr(e,{onSessionStart:s,onStart:a,onMove:r,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Lr(this.visualElement)})}stop(e,i){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&M.postRender(()=>a(e,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,n){const{drag:s}=this.getProps();if(!n||!et(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let r=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(r=ml(r,this.constraints[e],this.elastic[e])),a.set(r)}resolveConstraints(){var e;const{dragConstraints:i,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;i&&Ae(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&s?this.constraints=pl(s.layoutBox,i):this.constraints=!1,this.elastic=vl(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&H(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=yl(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!Ae(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=Sl(n,s.root,this.visualElement.getTransformPagePoint());let r=gl(s.layout.layoutBox,a);if(i){const o=i(bl(r));this.hasMutatedConstraints=!!o,o&&(r=Dr(o))}return r}startAnimation(e){const{drag:i,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=H(l=>{if(!et(l,i,this.currentDirection))return;let d=c&&c[l]||{};r&&(d={min:0,max:0});const h=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:n?e[l]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(l,g)});return Promise.all(u).then(o)}startAxisValueAnimation(e,i){const n=this.getAxisMotionValue(e);return si(this.visualElement,e),n.start(Fi(e,n,0,i,this.visualElement,!1))}stopAnimation(){H(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){H(e=>{var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(e){var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[i];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){H(i=>{const{drag:n}=this.getProps();if(!et(i,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(i);if(s&&s.layout){const{min:r,max:o}=s.layout.layoutBox[i];a.set(e[i]-E(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:n}=this.visualElement;if(!Ae(i)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};H(r=>{const o=this.getAxisMotionValue(r);if(o&&this.constraints!==!1){const c=o.get();s[r]=xl({min:c,max:c},this.constraints[r])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),H(r=>{if(!et(r,e,null))return;const o=this.getAxisMotionValue(r),{min:c,max:u}=this.constraints[r];o.set(E(c,u,s[r]))})}addListeners(){if(!this.visualElement.current)return;Al.set(this.visualElement,this);const e=this.visualElement.current,i=ie(e,"pointerdown",c=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ae(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),M.read(n);const r=Q(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(H(l=>{const d=this.getAxisMotionValue(l);d&&(this.originPoint[l]+=c[l].translate,d.set(d.get()+c[l].translate))}),this.visualElement.render())});return()=>{r(),i(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:r=ai,dragMomentum:o=!0}=e;return{...e,drag:i,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:r,dragMomentum:o}}}function et(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function kl(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class Pl extends ue{constructor(e){super(e),this.removeGroupControls=O,this.removeListeners=O,this.controls=new Cl(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||O}unmount(){this.removeGroupControls(),this.removeListeners()}}const zn=t=>(e,i)=>{t&&M.postRender(()=>t(e,i))};class Ml extends ue{constructor(){super(...arguments),this.removePointerDownListener=O}onPointerDown(e){this.session=new Cr(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lr(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:zn(e),onStart:zn(i),onMove:n,onEnd:(a,r)=>{delete this.session,s&&M.postRender(()=>s(a,r))}}}mount(){this.removePointerDownListener=ie(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ct=b.createContext(null);function El(){const t=b.useContext(Ct);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:n}=t,s=b.useId();b.useEffect(()=>n(s),[]);const a=b.useCallback(()=>i&&i(s),[s,i]);return!e&&i?[!1,a]:[!0]}const Vi=b.createContext({}),Nr=b.createContext({}),ot={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gn(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _e={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(A.test(t))t=parseFloat(t);else return t;const i=Gn(t,e.target.x),n=Gn(t,e.target.y);return`${i}% ${n}%`}},Il={correct:(t,{treeScale:e,projectionDelta:i})=>{const n=t,s=le.parse(t);if(s.length>5)return n;const a=le.createTransformer(t),r=typeof s[0]!="number"?1:0,o=i.x.scale*e.x,c=i.y.scale*e.y;s[0+r]/=o,s[1+r]/=c;const u=E(o,c,.5);return typeof s[2+r]=="number"&&(s[2+r]/=u),typeof s[3+r]=="number"&&(s[3+r]/=u),a(s)}},gt={};function Rl(t){Object.assign(gt,t)}const{schedule:ji,cancel:Uf}=Os(queueMicrotask,!1);class Dl extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=e;Rl(_l),a&&(i.group&&i.group.add(a),n&&n.register&&s&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ot.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:n,drag:s,isPresent:a}=this.props,r=n.projection;return r&&(r.isPresent=a,s||e.layoutDependency!==i||i===void 0?r.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?r.promote():r.relegate()||M.postRender(()=>{const o=r.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ji.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Or(t){const[e,i]=El(),n=b.useContext(Vi);return p.jsx(Dl,{...t,layoutGroup:n,switchLayoutGroup:b.useContext(Nr),isPresent:e,safeToRemove:i})}const _l={borderRadius:{..._e,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomLeftRadius:_e,borderBottomRightRadius:_e,boxShadow:Il},Vr=["TopLeft","TopRight","BottomLeft","BottomRight"],Fl=Vr.length,Xn=t=>typeof t=="string"?parseFloat(t):t,$n=t=>typeof t=="number"||A.test(t);function Bl(t,e,i,n,s,a){s?(t.opacity=E(0,i.opacity!==void 0?i.opacity:1,Ll(n)),t.opacityExit=E(e.opacity!==void 0?e.opacity:1,0,Nl(n))):a&&(t.opacity=E(e.opacity!==void 0?e.opacity:1,i.opacity!==void 0?i.opacity:1,n));for(let r=0;r<Fl;r++){const o=`border${Vr[r]}Radius`;let c=Wn(e,o),u=Wn(i,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||$n(c)===$n(u)?(t[o]=Math.max(E(Xn(c),Xn(u),n),0),(Z.test(u)||Z.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||i.rotate)&&(t.rotate=E(e.rotate||0,i.rotate||0,n))}function Wn(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Ll=jr(0,.5,$s),Nl=jr(.5,.95,O);function jr(t,e,i){return n=>n<t?0:n>e?1:i(Ie(t,e,n))}function Kn(t,e){t.min=e.min,t.max=e.max}function W(t,e){Kn(t.x,e.x),Kn(t.y,e.y)}function Hn(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qn(t,e,i,n,s){return t-=e,t=pt(t,1/i,n),s!==void 0&&(t=pt(t,1/s,n)),t}function Ol(t,e=0,i=1,n=.5,s,a=t,r=t){if(Z.test(e)&&(e=parseFloat(e),e=E(r.min,r.max,e/100)-r.min),typeof e!="number")return;let o=E(a.min,a.max,n);t===a&&(o-=e),t.min=qn(t.min,e,i,o,s),t.max=qn(t.max,e,i,o,s)}function Yn(t,e,[i,n,s],a,r){Ol(t,e[i],e[n],e[s],e.scale,a,r)}const Vl=["x","scaleX","originX"],jl=["y","scaleY","originY"];function Zn(t,e,i,n){Yn(t.x,e,Vl,i?i.x:void 0,n?n.x:void 0),Yn(t.y,e,jl,i?i.y:void 0,n?n.y:void 0)}function Jn(t){return t.translate===0&&t.scale===1}function Ur(t){return Jn(t.x)&&Jn(t.y)}function Qn(t,e){return t.min===e.min&&t.max===e.max}function Ul(t,e){return Qn(t.x,e.x)&&Qn(t.y,e.y)}function es(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zr(t,e){return es(t.x,e.x)&&es(t.y,e.y)}function ts(t){return $(t.x)/$(t.y)}function is(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zl{constructor(){this.members=[]}add(e){Bi(this.members,e),e.scheduleRender()}remove(e){if(Li(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(s=>e===s);if(i===0)return!1;let n;for(let s=i;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,i){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,i&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:n}=e;i.onExitComplete&&i.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gl(t,e,i){let n="";const s=t.x.translate/e.x,a=t.y.translate/e.y,r=(i==null?void 0:i.z)||0;if((s||a||r)&&(n=`translate3d(${s}px, ${a}px, ${r}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:u,rotate:l,rotateX:d,rotateY:h,skewX:m,skewY:g}=i;u&&(n=`perspective(${u}px) ${n}`),l&&(n+=`rotate(${l}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),m&&(n+=`skewX(${m}deg) `),g&&(n+=`skewY(${g}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const Xl=(t,e)=>t.depth-e.depth;class $l{constructor(){this.children=[],this.isDirty=!1}add(e){Bi(this.children,e),this.isDirty=!0}remove(e){Li(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Xl),this.isDirty=!1,this.children.forEach(e)}}function ct(t){const e=j(t)?t.get():t;return Lc(e)?e.toValue():e}function Wl(t,e){const i=J.now(),n=({timestamp:s})=>{const a=s-i;a>=e&&(oe(n),t(a-e))};return M.read(n,!0),()=>oe(n)}function Kl(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Hl(t,e,i){const n=j(t)?t:$e(t);return n.start(Fi("",n,e,i)),n.animation}const pe={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Be=typeof window<"u"&&window.MotionDebug!==void 0,zt=["","X","Y","Z"],ql={visibility:"hidden"},ns=1e3;let Yl=0;function Gt(t,e,i,n){const{latestValues:s}=e;s[t]&&(i[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Gr(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=Tr(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",M,!(s||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Gr(n)}function Xr({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(r={},o=e==null?void 0:e()){this.id=Yl++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Be&&(pe.totalNodes=pe.resolvedTargetDeltas=pe.recalculatedProjection=0),this.nodes.forEach(Ql),this.nodes.forEach(su),this.nodes.forEach(ru),this.nodes.forEach(eu),Be&&window.MotionDebug.record(pe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new $l)}addEventListener(r,o){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new Ni),this.eventHandlers.get(r).add(o)}notifyListeners(r,...o){const c=this.eventHandlers.get(r);c&&c.notify(...o)}hasListeners(r){return this.eventHandlers.has(r)}mount(r,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Kl(r),this.instance=r;const{layoutId:c,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(r,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Wl(h,250),ot.hasAnimatedSinceResize&&(ot.hasAnimatedSinceResize=!1,this.nodes.forEach(rs))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||l.getDefaultTransition()||uu,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=l.getProps(),v=!this.targetLayout||!zr(this.targetLayout,g)||m,T=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,T);const w={...bi(f,"layout"),onPlay:y,onComplete:x};(l.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else h||rs(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,oe(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(au),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Gr(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const d=this.path[l];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ss);return}this.isUpdating||this.nodes.forEach(iu),this.isUpdating=!1,this.nodes.forEach(nu),this.nodes.forEach(Zl),this.nodes.forEach(Jl),this.clearAllSnapshots();const o=J.now();L.delta=ce(0,1e3/60,o-L.timestamp),L.timestamp=o,L.isProcessing=!0,Ft.update.process(L),Ft.preRender.process(L),Ft.render.process(L),L.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ji.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tu),this.sharedNodes.forEach(ou)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,M.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){M.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=I(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(o=!1),o){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:c,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Ur(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;r&&(o||me(this.latestValues)||l)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return r&&(c=this.removeTransform(c)),du(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var r;const{visualElement:o}=this.options;if(!o)return I();const c=o.measureViewportBox();if(!(((r=this.scroll)===null||r===void 0?void 0:r.wasRoot)||this.path.some(hu))){const{scroll:l}=this.root;l&&(ke(c.x,l.offset.x),ke(c.y,l.offset.y))}return c}removeElementScroll(r){var o;const c=I();if(W(c,r),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:d,options:h}=l;l!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&W(c,r),ke(c.x,d.offset.x),ke(c.y,d.offset.y))}return c}applyTransform(r,o=!1){const c=I();W(c,r);for(let u=0;u<this.path.length;u++){const l=this.path[u];!o&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Pe(c,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),me(l.latestValues)&&Pe(c,l.latestValues)}return me(this.latestValues)&&Pe(c,this.latestValues),c}removeTransform(r){const o=I();W(o,r);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!me(u.latestValues))continue;oi(u.latestValues)&&u.updateSnapshot();const l=I(),d=u.measurePageBox();W(l,d),Zn(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return me(this.latestValues)&&Zn(o,this.latestValues),o}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==L.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(r||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=L.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=I(),this.relativeTargetOrigin=I(),je(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),W(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=I(),this.targetWithTransforms=I()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fl(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):W(this.target,this.layout.layoutBox),Fr(this.target,this.targetDelta)):W(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=I(),this.relativeTargetOrigin=I(),je(this.relativeTargetOrigin,this.target,m.target),W(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Be&&pe.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||oi(this.parent.latestValues)||_r(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var r;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((r=this.parent)===null||r===void 0)&&r.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===L.timestamp&&(u=!1),u)return;const{layout:l,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||d))return;W(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;wl(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=I());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hn(this.prevProjectionDelta.x,this.projectionDelta.x),Hn(this.prevProjectionDelta.y,this.projectionDelta.y)),Ve(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!is(this.projectionDelta.x,this.prevProjectionDelta.x)||!is(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Be&&pe.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),r){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ce(),this.projectionDelta=Ce(),this.projectionDeltaWithTransform=Ce()}setAnimationOrigin(r,o=!1){const c=this.snapshot,u=c?c.latestValues:{},l={...this.latestValues},d=Ce();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=I(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,f=m!==g,y=this.getStack(),x=!y||y.members.length<=1,v=!!(f&&!x&&this.options.crossfade===!0&&!this.path.some(lu));this.animationProgress=0;let T;this.mixTargetDelta=w=>{const S=w/1e3;as(d.x,r.x,S),as(d.y,r.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(je(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cu(this.relativeTarget,this.relativeTargetOrigin,h,S),T&&Ul(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=I()),W(T,this.relativeTarget)),f&&(this.animationValues=l,Bl(l,u,this.latestValues,S,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(oe(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=M.update(()=>{ot.hasAnimatedSinceResize=!0,this.currentAnimation=Hl(0,ns,{...r,onUpdate:o=>{this.mixTargetDelta(o),r.onUpdate&&r.onUpdate(o)},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ns),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:l}=r;if(!(!o||!c||!u)){if(this!==r&&this.layout&&u&&$r(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||I();const d=$(this.layout.layoutBox.x);c.x.min=r.target.x.min,c.x.max=c.x.min+d;const h=$(this.layout.layoutBox.y);c.y.min=r.target.y.min,c.y.max=c.y.min+h}W(o,c),Pe(o,l),Ve(this.projectionDeltaWithTransform,this.layoutCorrected,o,l)}}registerSharedNode(r,o){this.sharedNodes.has(r)||this.sharedNodes.set(r,new zl),this.sharedNodes.get(r).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var r;const{layoutId:o}=this.options;return o?((r=this.getStack())===null||r===void 0?void 0:r.lead)||this:this}getPrevLead(){var r;const{layoutId:o}=this.options;return o?(r=this.getStack())===null||r===void 0?void 0:r.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),r&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let o=!1;const{latestValues:c}=r;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&Gt("z",r,u,this.animationValues);for(let l=0;l<zt.length;l++)Gt(`rotate${zt[l]}`,r,u,this.animationValues),Gt(`skew${zt[l]}`,r,u,this.animationValues);r.render();for(const l in u)r.setStaticValue(l,u[l]),this.animationValues&&(this.animationValues[l]=u[l]);r.scheduleRender()}getProjectionStyles(r){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ql;const u={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ct(r==null?void 0:r.pointerEvents)||"",u.transform=l?l(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=ct(r==null?void 0:r.pointerEvents)||""),this.hasProjected&&!me(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Gl(this.projectionDeltaWithTransform,this.treeScale,h),l&&(u.transform=l(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const f in gt){if(h[f]===void 0)continue;const{correct:y,applyTo:x}=gt[f],v=u.transform==="none"?h[f]:y(h[f],d);if(x){const T=x.length;for(let w=0;w<T;w++)u[x[w]]=v}else u[f]=v}return this.options.layoutId&&(u.pointerEvents=d===this?ct(r==null?void 0:r.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var o;return(o=r.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(ss),this.root.sharedNodes.clear()}}}function Zl(t){t.updateLayout()}function Jl(t){var e;const i=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,r=i.source!==t.layout.source;a==="size"?H(d=>{const h=r?i.measuredBox[d]:i.layoutBox[d],m=$(h);h.min=n[d].min,h.max=h.min+m}):$r(a,i.layoutBox,n)&&H(d=>{const h=r?i.measuredBox[d]:i.layoutBox[d],m=$(n[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const o=Ce();Ve(o,n,i.layoutBox);const c=Ce();r?Ve(c,t.applyTransform(s,!0),i.measuredBox):Ve(c,n,i.layoutBox);const u=!Ur(o);let l=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=I();je(g,i.layoutBox,h.layoutBox);const f=I();je(f,n,m.layoutBox),zr(g,f)||(l=!0),d.options.layoutRoot&&(t.relativeTarget=f,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:i,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:l})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Ql(t){Be&&pe.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eu(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tu(t){t.clearSnapshot()}function ss(t){t.clearMeasurements()}function iu(t){t.isLayoutDirty=!1}function nu(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rs(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function su(t){t.resolveTargetDelta()}function ru(t){t.calcProjection()}function au(t){t.resetSkewAndRotation()}function ou(t){t.removeLeadSnapshot()}function as(t,e,i){t.translate=E(e.translate,0,i),t.scale=E(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function os(t,e,i,n){t.min=E(e.min,i.min,n),t.max=E(e.max,i.max,n)}function cu(t,e,i,n){os(t.x,e.x,i.x,n),os(t.y,e.y,i.y,n)}function lu(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uu={duration:.45,ease:[.4,0,.1,1]},cs=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ls=cs("applewebkit/")&&!cs("chrome/")?Math.round:O;function us(t){t.min=ls(t.min),t.max=ls(t.max)}function du(t){us(t.x),us(t.y)}function $r(t,e,i){return t==="position"||t==="preserve-aspect"&&!hl(ts(e),ts(i),.2)}function hu(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const fu=Xr({attachResizeListener:(t,e)=>Q(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xt={current:void 0},Wr=Xr({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xt.current){const t=new fu({});t.mount(window),t.setOptions({layoutScroll:!0}),Xt.current=t}return Xt.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mu={pan:{Feature:Ml},drag:{Feature:Pl,ProjectionNode:Wr,MeasureLayout:Or}};function ds(t,e){const i=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",s=(a,r)=>{if(a.pointerType==="touch"||Er())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const c=o[n];c&&M.postRender(()=>c(a,r))};return ie(t.current,i,s,{passive:!t.getProps()[n]})}class pu extends ue{mount(){this.unmount=te(ds(this.node,!0),ds(this.node,!1))}unmount(){}}class gu extends ue{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=te(Q(this.node.current,"focus",()=>this.onFocus()),Q(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Kr=(t,e)=>e?t===e?!0:Kr(t,e.parentElement):!1;function $t(t,e){if(!e)return;const i=new PointerEvent("pointer"+t);e(i,At(i))}class xu extends ue{constructor(){super(...arguments),this.removeStartListeners=O,this.removeEndListeners=O,this.removeAccessibleListeners=O,this.startPointerPress=(e,i)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=ie(window,"pointerup",(o,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:l,globalTapTarget:d}=this.node.getProps(),h=!d&&!Kr(this.node.current,o.target)?l:u;h&&M.update(()=>h(o,c))},{passive:!(n.onTap||n.onPointerUp)}),r=ie(window,"pointercancel",(o,c)=>this.cancelPress(o,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=te(a,r),this.startPress(e,i)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const r=o=>{o.key!=="Enter"||!this.checkPressEnd()||$t("up",(c,u)=>{const{onTap:l}=this.node.getProps();l&&M.postRender(()=>l(c,u))})};this.removeEndListeners(),this.removeEndListeners=Q(this.node.current,"keyup",r),$t("down",(o,c)=>{this.startPress(o,c)})},i=Q(this.node.current,"keydown",e),n=()=>{this.isPressing&&$t("cancel",(a,r)=>this.cancelPress(a,r))},s=Q(this.node.current,"blur",n);this.removeAccessibleListeners=te(i,s)}}startPress(e,i){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&M.postRender(()=>n(e,i))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Er()}cancelPress(e,i){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&M.postRender(()=>n(e,i))}mount(){const e=this.node.getProps(),i=ie(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Q(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=te(i,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const li=new WeakMap,Wt=new WeakMap,yu=t=>{const e=li.get(t.target);e&&e(t)},vu=t=>{t.forEach(yu)};function bu({root:t,...e}){const i=t||document;Wt.has(i)||Wt.set(i,{});const n=Wt.get(i),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(vu,{root:t,...e})),n[s]}function Tu(t,e,i){const n=bu(e);return li.set(t,i),n.observe(t),()=>{li.delete(t),n.unobserve(t)}}const wu={some:0,all:1};class Su extends ue{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:n,amount:s="some",once:a}=e,r={root:i?i.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:wu[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:l,onViewportLeave:d}=this.node.getProps(),h=u?l:d;h&&h(c)};return Tu(this.node.current,r,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(Au(e,i))&&this.startObserver()}unmount(){}}function Au({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const Cu={inView:{Feature:Su},tap:{Feature:xu},focus:{Feature:gu},hover:{Feature:pu}},ku={layout:{ProjectionNode:Wr,MeasureLayout:Or}},Ui=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),kt=b.createContext({}),zi=typeof window<"u",Hr=zi?b.useLayoutEffect:b.useEffect,qr=b.createContext({strict:!1});function Pu(t,e,i,n,s){var a,r;const{visualElement:o}=b.useContext(kt),c=b.useContext(qr),u=b.useContext(Ct),l=b.useContext(Ui).reducedMotion,d=b.useRef();n=n||c.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:i,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l}));const h=d.current,m=b.useContext(Nr);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&Mu(d.current,i,s,m);const g=b.useRef(!1);b.useInsertionEffect(()=>{h&&g.current&&h.update(i,u)});const f=i[br],y=b.useRef(!!f&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,f))&&((r=window.MotionHasOptimisedAnimation)===null||r===void 0?void 0:r.call(window,f)));return Hr(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),ji.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,f)}),y.current=!1))}),h}function Mu(t,e,i,n){const{layoutId:s,layout:a,drag:r,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:Yr(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!r||o&&Ae(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function Yr(t){if(t)return t.options.allowProjection!==!1?t.projection:Yr(t.parent)}function Eu(t,e,i){return b.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),i&&(typeof i=="function"?i(n):Ae(i)&&(i.current=n))},[e])}function Pt(t){return Tt(t.animate)||vi.some(e=>ze(t[e]))}function Zr(t){return!!(Pt(t)||t.variants)}function Iu(t,e){if(Pt(t)){const{initial:i,animate:n}=t;return{initial:i===!1||ze(i)?i:void 0,animate:ze(n)?n:void 0}}return t.inherit!==!1?e:{}}function Ru(t){const{initial:e,animate:i}=Iu(t,b.useContext(kt));return b.useMemo(()=>({initial:e,animate:i}),[hs(e),hs(i)])}function hs(t){return Array.isArray(t)?t.join(" "):t}const fs={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Re={};for(const t in fs)Re[t]={isEnabled:e=>fs[t].some(i=>!!e[i])};function Du(t){for(const e in t)Re[e]={...Re[e],...t[e]}}const _u=Symbol.for("motionComponentSymbol");function Fu({preloadedFeatures:t,createVisualElement:e,useRender:i,useVisualState:n,Component:s}){t&&Du(t);function a(o,c){let u;const l={...b.useContext(Ui),...o,layoutId:Bu(o)},{isStatic:d}=l,h=Ru(o),m=n(o,d);if(!d&&zi){Lu();const g=Nu(l);u=g.MeasureLayout,h.visualElement=Pu(s,m,l,e,g.ProjectionNode)}return p.jsxs(kt.Provider,{value:h,children:[u&&h.visualElement?p.jsx(u,{visualElement:h.visualElement,...l}):null,i(s,o,Eu(m,h.visualElement,c),m,d,h.visualElement)]})}const r=b.forwardRef(a);return r[_u]=s,r}function Bu({layoutId:t}){const e=b.useContext(Vi).id;return e&&t!==void 0?e+"-"+t:t}function Lu(t,e){b.useContext(qr).strict}function Nu(t){const{drag:e,layout:i}=Re;if(!e&&!i)return{};const n={...e,...i};return{MeasureLayout:e!=null&&e.isEnabled(t)||i!=null&&i.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Ou=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gi(t){return typeof t!="string"||t.includes("-")?!1:!!(Ou.indexOf(t)>-1||/[A-Z]/u.test(t))}function Jr(t,{style:e,vars:i},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const a in i)t.style.setProperty(a,i[a])}const Qr=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ea(t,e,i,n){Jr(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(Qr.has(s)?s:Oi(s),e.attrs[s])}function ta(t,{layout:e,layoutId:i}){return be.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!gt[t]||t==="opacity")}function Xi(t,e,i){var n;const{style:s}=t,a={};for(const r in s)(j(s[r])||e.style&&j(e.style[r])||ta(r,t)||((n=i==null?void 0:i.getValue(r))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[r]=s[r]);return a}function ia(t,e,i){const n=Xi(t,e,i);for(const s in t)if(j(t[s])||j(e[s])){const a=We.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=t[s]}return n}function $i(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}function Vu({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:i},n,s,a){const r={latestValues:ju(n,s,a,t),renderState:e()};return i&&(r.mount=o=>i(n,o,r)),r}const na=t=>(e,i)=>{const n=b.useContext(kt),s=b.useContext(Ct),a=()=>Vu(t,e,n,s);return i?a():$i(a)};function ju(t,e,i,n){const s={},a=n(t,{});for(const h in a)s[h]=ct(a[h]);let{initial:r,animate:o}=t;const c=Pt(t),u=Zr(t);e&&u&&!c&&t.inherit!==!1&&(r===void 0&&(r=e.initial),o===void 0&&(o=e.animate));let l=i?i.initial===!1:!1;l=l||r===!1;const d=l?o:r;if(d&&typeof d!="boolean"&&!Tt(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const g=xi(t,h[m]);if(g){const{transitionEnd:f,transition:y,...x}=g;for(const v in x){let T=x[v];if(Array.isArray(T)){const w=l?T.length-1:0;T=T[w]}T!==null&&(s[v]=T)}for(const v in f)s[v]=f[v]}}}return s}const Wi=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),sa=()=>({...Wi(),attrs:{}}),ra=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Uu={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zu=We.length;function Gu(t,e,i){let n="",s=!0;for(let a=0;a<zu;a++){const r=We[a],o=t[r];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(r.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||i){const u=ra(o,Pi[r]);if(!c){s=!1;const l=Uu[r]||r;n+=`${l}(${u}) `}i&&(e[r]=u)}}return n=n.trim(),i?n=i(e,s?"":n):s&&(n="none"),n}function Ki(t,e,i){const{style:n,vars:s,transformOrigin:a}=t;let r=!1,o=!1;for(const c in e){const u=e[c];if(be.has(c)){r=!0;continue}else if(Zs(c)){s[c]=u;continue}else{const l=ra(u,Pi[c]);c.startsWith("origin")?(o=!0,a[c]=l):n[c]=l}}if(e.transform||(r||i?n.transform=Gu(e,t.transform,i):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:l=0}=a;n.transformOrigin=`${c} ${u} ${l}`}}function ms(t,e,i){return typeof t=="string"?t:A.transform(e+i*t)}function Xu(t,e,i){const n=ms(e,t.x,t.width),s=ms(i,t.y,t.height);return`${n} ${s}`}const $u={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wu={offset:"strokeDashoffset",array:"strokeDasharray"};function Ku(t,e,i=1,n=0,s=!0){t.pathLength=1;const a=s?$u:Wu;t[a.offset]=A.transform(-n);const r=A.transform(e),o=A.transform(i);t[a.array]=`${r} ${o}`}function Hi(t,{attrX:e,attrY:i,attrScale:n,originX:s,originY:a,pathLength:r,pathSpacing:o=1,pathOffset:c=0,...u},l,d){if(Ki(t,u,d),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m,dimensions:g}=t;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(s!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=Xu(g,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(h.x=e),i!==void 0&&(h.y=i),n!==void 0&&(h.scale=n),r!==void 0&&Ku(h,r,o,c,!1)}const qi=t=>typeof t=="string"&&t.toLowerCase()==="svg",Hu={useVisualState:na({scrapeMotionValuesFromProps:ia,createRenderState:sa,onMount:(t,e,{renderState:i,latestValues:n})=>{M.read(()=>{try{i.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}),M.render(()=>{Hi(i,n,qi(e.tagName),t.transformTemplate),ea(e,i)})}})},qu={useVisualState:na({scrapeMotionValuesFromProps:Xi,createRenderState:Wi})};function aa(t,e,i){for(const n in e)!j(e[n])&&!ta(n,i)&&(t[n]=e[n])}function Yu({transformTemplate:t},e){return b.useMemo(()=>{const i=Wi();return Ki(i,e,t),Object.assign({},i.vars,i.style)},[e])}function Zu(t,e){const i=t.style||{},n={};return aa(n,i,t),Object.assign(n,Yu(t,e)),n}function Ju(t,e){const i={},n=Zu(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=n,i}const Qu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xt(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qu.has(t)}let oa=t=>!xt(t);function ed(t){t&&(oa=e=>e.startsWith("on")?!xt(e):t(e))}try{ed(require("@emotion/is-prop-valid").default)}catch{}function td(t,e,i){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(oa(s)||i===!0&&xt(s)||!e&&!xt(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function id(t,e,i,n){const s=b.useMemo(()=>{const a=sa();return Hi(a,e,qi(n),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};aa(a,t.style,t),s.style={...a,...s.style}}return s}function nd(t=!1){return(i,n,s,{latestValues:a},r)=>{const c=(Gi(i)?id:Ju)(n,a,r,i),u=td(n,typeof i=="string",t),l=i!==b.Fragment?{...u,...c,ref:s}:{},{children:d}=n,h=b.useMemo(()=>j(d)?d.get():d,[d]);return b.createElement(i,{...l,children:h})}}function sd(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const r={...Gi(n)?Hu:qu,preloadedFeatures:t,useRender:nd(s),createVisualElement:e,Component:n};return Fu(r)}}const ui={current:null},ca={current:!1};function rd(){if(ca.current=!0,!!zi)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ui.current=t.matches;t.addListener(e),e()}else ui.current=!1}function ad(t,e,i){for(const n in e){const s=e[n],a=i[n];if(j(s))t.addValue(n,s);else if(j(a))t.addValue(n,$e(s,{owner:t}));else if(a!==s)if(t.hasValue(n)){const r=t.getValue(n);r.liveStyle===!0?r.jump(s):r.hasAnimated||r.set(s)}else{const r=t.getStaticValue(n);t.addValue(n,$e(r!==void 0?r:s,{owner:t}))}}for(const n in i)e[n]===void 0&&t.removeValue(n);return e}const ps=new WeakMap,od=[...er,V,le],cd=t=>od.find(Qs(t)),gs=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ld{scrapeMotionValuesFromProps(e,i,n){return{}}constructor({parent:e,props:i,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ai,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=J.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,M.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=r;this.latestValues=c,this.baseTarget={...c},this.initialValues=i.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=i,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Pt(i),this.isVariantNode=Zr(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...d}=this.scrapeMotionValuesFromProps(i,{},this);for(const h in d){const m=d[h];c[h]!==void 0&&j(m)&&m.set(c[h],!1)}}mount(e){this.current=e,ps.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,n)=>this.bindToMotionValue(n,i)),ca.current||rd(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ui.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ps.delete(this.current),this.projection&&this.projection.unmount(),oe(this.notifyUpdate),oe(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=be.has(e),s=i.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&M.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=i.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{s(),a(),r&&r(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Re){const i=Re[e];if(!i)continue;const{isEnabled:n,Feature:s}=i;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):I()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let n=0;n<gs.length;n++){const s=gs[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,r=e[a];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=ad(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const n=this.values.get(e);i!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&i!==void 0&&(n=$e(i===null?void 0:i,{owner:this}),this.addValue(e,n)),n}readValue(e,i){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(qs(s)||Ks(s))?s=parseFloat(s):!cd(s)&&le.test(i)&&(s=cr(e,i)),this.setBaseTarget(e,j(s)?s.get():s)),j(s)?s.get():s}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){var i;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=xi(this.props,n,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);r&&(s=r[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!j(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new Ni),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}}class la extends ld{constructor(){super(...arguments),this.KeyframeResolver=lr}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:n}){delete i[e],delete n[e]}}function ud(t){return window.getComputedStyle(t)}class dd extends la{constructor(){super(...arguments),this.type="html",this.renderInstance=Jr}readValueFromInstance(e,i){if(be.has(i)){const n=Mi(i);return n&&n.default||0}else{const n=ud(e),s=(Zs(i)?n.getPropertyValue(i):n[i])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:i}){return Br(e,i)}build(e,i,n){Ki(e,i,n.transformTemplate)}scrapeMotionValuesFromProps(e,i,n){return Xi(e,i,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;j(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}class hd extends la{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=I}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(be.has(i)){const n=Mi(i);return n&&n.default||0}return i=Qr.has(i)?i:Oi(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,n){return ia(e,i,n)}build(e,i,n){Hi(e,i,this.isSVGTag,n.transformTemplate)}renderInstance(e,i,n,s){ea(e,i,n,s)}mount(e){this.isSVGTag=qi(e.tagName),super.mount(e)}}const fd=(t,e)=>Gi(t)?new hd(e):new dd(e,{allowProjection:t!==b.Fragment}),md=sd({...nl,...Cu,...mu,...ku},fd),pd=Wa(md);class gd extends b.Component{getSnapshotBeforeUpdate(e){const i=this.props.childRef.current;if(i&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=i.offsetHeight||0,n.width=i.offsetWidth||0,n.top=i.offsetTop,n.left=i.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xd({children:t,isPresent:e}){const i=b.useId(),n=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=b.useContext(Ui);return b.useInsertionEffect(()=>{const{width:r,height:o,top:c,left:u}=s.current;if(e||!n.current||!r||!o)return;n.current.dataset.motionPopId=i;const l=document.createElement("style");return a&&(l.nonce=a),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[e]),p.jsx(gd,{isPresent:e,childRef:n,sizeRef:s,children:b.cloneElement(t,{ref:n})})}const yd=({children:t,initial:e,isPresent:i,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:r})=>{const o=$i(vd),c=b.useId(),u=b.useCallback(d=>{o.set(d,!0);for(const h of o.values())if(!h)return;n&&n()},[o,n]),l=b.useMemo(()=>({id:c,initial:e,isPresent:i,custom:s,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),a?[Math.random(),u]:[i,u]);return b.useMemo(()=>{o.forEach((d,h)=>o.set(h,!1))},[i]),b.useEffect(()=>{!i&&!o.size&&n&&n()},[i]),r==="popLayout"&&(t=p.jsx(xd,{isPresent:i,children:t})),p.jsx(Ct.Provider,{value:l,children:t})};function vd(){return new Map}const tt=t=>t.key||"";function xs(t){const e=[];return b.Children.forEach(t,i=>{b.isValidElement(i)&&e.push(i)}),e}const bd=({children:t,exitBeforeEnter:e,custom:i,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:r="sync"})=>{const o=b.useMemo(()=>xs(t),[t]),c=o.map(tt),u=b.useRef(!0),l=b.useRef(o),d=$i(()=>new Map),[h,m]=b.useState(o),[g,f]=b.useState(o);Hr(()=>{u.current=!1,l.current=o;for(let v=0;v<g.length;v++){const T=tt(g[v]);c.includes(T)?d.delete(T):d.get(T)!==!0&&d.set(T,!1)}},[g,c.length,c.join("-")]);const y=[];if(o!==h){let v=[...o];for(let T=0;T<g.length;T++){const w=g[T],S=tt(w);c.includes(S)||(v.splice(T,0,w),y.push(w))}r==="wait"&&y.length&&(v=y),f(xs(v)),m(o);return}const{forceRender:x}=b.useContext(Vi);return p.jsx(p.Fragment,{children:g.map(v=>{const T=tt(v),w=o===g||c.includes(T),S=()=>{if(d.has(T))d.set(T,!0);else return;let P=!0;d.forEach(D=>{D||(P=!1)}),P&&(x==null||x(),f(l.current),s&&s())};return p.jsx(yd,{isPresent:w,initial:!u.current||n?void 0:!1,custom:w?void 0:i,presenceAffectsLayout:a,mode:r,onExitComplete:w?void 0:S,children:v},T)})})},Td=t=>{const e=Math.floor(t/60),i=Math.floor(t%60);return`${String(e).padStart(2,"0")}:${String(i).padStart(2,"0")}`},wd=({progress:t,onChange:e,duration:i})=>{const n=Math.floor(t*i),s=Math.floor(n/60),a=String(n%60).padStart(2,"0"),r=`${s}:${a}`;return p.jsxs("div",{className:"relative flex items-center w-full h-8",children:[p.jsxs("div",{className:"absolute inset-0 flex justify-between items-center h-full text-sm text-white",children:[p.jsx("span",{className:"relative z-10 pointer-events-none",children:r}),p.jsx("span",{className:"relative z-10 pointer-events-none",children:Td(i)})]}),p.jsx("div",{className:"absolute inset-0 h-full bg-gray-600 rounded-lg"}),p.jsx("div",{className:"absolute h-full bg-[#4ADA31] rounded-lg",style:{width:`${Math.min(t*100,100)}%`}}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:Math.min(Math.max(t,0),1),onChange:o=>e(Number(o.target.value)*100),className:"absolute w-full h-full opacity-0 cursor-pointer"})]})},Sd=({mp3:t,onClose:e,toast:i,nextTrack:n})=>{const s=b.useRef(null),[a,r]=b.useState(!1),[o,c]=b.useState(!1),[u,l]=b.useState(!1),[d,h]=b.useState(1),[m,g]=b.useState(!1),[f,y]=b.useState(0),[x,v]=b.useState(""),T=b.useRef(0),w=1,[S,P]=b.useState(0),D=b.useRef(new Set),k=()=>{D.current.add(t.url),v("Audio file cannot be played. Attempting next track..."),r(!1),l(!1),c(!1),P(0),n()},F=_=>{if(D.current.has(_.url)){v("This track is unavailable. Skipping..."),n();return}l(!0),v(""),c(!1),r(!1),s.current.src=_.url,s.current.load()},U=()=>{T.current=s.current.duration,T.current>0?(r(!0),l(!1)):k()},ne=()=>{r(!0),l(!1),Te()},Te=()=>{a&&s.current&&s.current.play().then(()=>{c(!0),l(!1)}).catch(_=>{console.error("Error playing audio:",_),S<w?(P(S+1),F(t)):k()})},Rt=()=>{o?(s.current.pause(),c(!1)):(l(!0),Te())},Ze=_=>{s.current&&(s.current.currentTime=_/100*T.current)},en=()=>{if(s.current&&T.current>0){const se=s.current.currentTime/T.current;y(Math.min(Math.max(se,0),1))}},tn=_=>{const se=parseFloat(_.target.value);h(se),s.current&&(s.current.volume=se)},B=()=>{c(!1),y(0),m?Te():n()};return b.useEffect(()=>(t&&F(t),()=>{s.current&&(s.current.pause(),s.current.currentTime=0)}),[t]),p.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-[#333] text-white flex items-center space-x-4 shadow-lg rounded-lg mx-10 z-50",children:[p.jsx("button",{className:"p-2 bg-[#4ADA31] text-white rounded-full cursor-pointer hover:bg-[#38a623]",onClick:Rt,disabled:u||x,children:o?p.jsx(Da,{className:"text-xl"}):p.jsx(Fs,{className:"text-xl"})}),p.jsxs("div",{className:"flex flex-col flex-grow-[10]",children:[p.jsx("h3",{className:"text-lg",children:t.title}),u&&!x&&p.jsx("p",{className:"text-yellow-300 animate-pulse",children:"Loading..."}),!u&&x&&p.jsx("p",{className:"text-red-500",children:x}),p.jsx(wd,{progress:isNaN(f)?0:f,onChange:Ze,duration:T.current||0})]}),p.jsxs("div",{className:"flex flex-col gap-2 flex-grow-[1] items-center justify-center",children:[p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx(_a,{className:"stroke-[#4ADA31]"}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:d,onChange:tn,className:"w-16 rounded-full appearance-none bg-[#4ADA31] cursor-pointer",style:{background:`linear-gradient(to right, #4ADA31 ${d*100}%, #ccc ${d*100}%)`}})]}),p.jsxs("button",{onClick:()=>g(!m),className:`text-lg border px-2 py-1 rounded-lg hover:border-[#4ADA31] flex items-center gap-2 ${m?"text-[#4ADA31]":"text-gray-400"}`,children:["Repeat ",p.jsx(Fa,{})]})]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-[#4ADA31]",children:"Close"}),p.jsx("audio",{ref:s,onError:k,onLoadedData:U,onCanPlay:ne,onTimeUpdate:en,onEnded:B,preload:"none",children:"Your browser does not support the audio element."})]})};function Ad(t){const e=["Bytes","KB","MB","GB","TB"];if(t===0)return"0 Byte";const i=parseInt(Math.floor(Math.log(t)/Math.log(1024)),10);return`${(t/Math.pow(1024,i)).toFixed(2)} ${e[i]}`}async function Cd(t,e,i,n){try{if(!t||!t.uid)throw new Error("User is not logged in.");const s=t.uid,a=Bs(Ls,`users/${s}/mp3s`,e);return await Ba(a),i.success(n+" deleted succesfully!"),!0}catch(s){return console.error("Failed to delete MP3:",s==null?void 0:s.message),i.error("Failed to delete MP3:",s==null?void 0:s.message),!1}}const kd=({authUser:t,loadingRefresh:e,refreshMP3Link:i,setCurrentMP3:n,mp3List:s,setMP3List:a,loading:r,toast:o})=>{const[c,u]=b.useState(s),[l,d]=b.useState(null);b.useEffect(()=>{u(s)},[s]);const h=async f=>{t?(await Cd(t,f.youtubeID,o,f.title),a(y=>y.filter(x=>x.youtubeID!==f.youtubeID))):console.error("You need to be logged in to delete this song.")},m=async f=>{d(f.url),await i(f),e||d(null)},g=f=>{n(f)};return p.jsx("div",{className:"max-w-[1550px] w-full mt-20 flex justify-center mx-auto",children:r?p.jsx(ut,{}):p.jsxs("div",{className:"w-full overflow-x-auto px-2",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-white text-center",children:"Songs"}),p.jsxs("table",{className:"w-full text-sm bg-[#1f1f1f] rounded-lg overflow-hidden shadow-lg border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-300 bg-[#333]",children:[p.jsx("th",{className:"p-3 border-b border-gray-600 text-left",children:"Play"}),p.jsx("th",{className:"p-3 border-b border-gray-600 text-left",children:"Title"}),p.jsx("th",{className:"p-3 border-b border-gray-600 text-center",children:"Actions"}),p.jsx("th",{className:"p-3 border-b border-gray-600 text-right hidden sm:table-cell",children:"Size"})]})}),p.jsx("tbody",{children:c.map(f=>p.jsxs("tr",{className:`${l===f.url?"opacity-50":"hover:bg-[#2c2c2c]"} transition-colors duration-200`,children:[p.jsx("td",{className:"p-1 sm:p-3 text-center",children:p.jsx("button",{onClick:()=>g(f),className:"w-10 h-10 flex items-center justify-center bg-[#4ADA31] text-white rounded-full shadow hover:shadow-md hover:bg-[#38a623] transition-all duration-300",children:p.jsx(Fs,{className:"text-xs sm:text-xl"})})}),p.jsx("td",{className:"p-1 sm:p-3",children:l===f.url?p.jsx(ut,{}):p.jsx(La,{url:f.youtubeURL,href:f.url,title:f.title,className:"text-xs sm:text-lg text-gray-100 hover:text-[#4ADA31] transition-colors duration-200"})}),p.jsx("td",{className:"p-3 text-center table-cell",children:p.jsxs("div",{className:"flex gap-2 justify-center",children:[p.jsx(nn,{aria_label:"Delete item",type:"button",children:"Delete",onClick:()=>h(f),className:"px-1 py-0 text-sm sm:py-2 sm:px-4 sm:text-base bg-[#555] text-[#FF5252] rounded-lg hover:bg-[#777] transition-all duration-200"}),p.jsx(nn,{aria_label:"Refresh item",type:"button",children:"Refresh Link",onClick:()=>m(f),className:`px-1 py-0 text-sm sm:py-2 sm:px-4 sm:text-base bg-[#555] text-[#4ecb52] rounded-lg hover:bg-[#777] transition-all duration-200 ${l===f.url?"animate-pulse":""}`})]})}),p.jsx("td",{className:"p-3 text-gray-400 text-right hidden sm:table-cell",children:Ad(f.fileSize)})]},f.youtubeID))})]})]})})},Pd="End-Of-Stream";class G extends Error{constructor(){super(Pd)}}class Md{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,i,n){const s=await this.read(e,i,n);return this.peekQueue.push(e.subarray(i,i+s)),s}async read(e,i,n){if(n===0)return 0;let s=this.readFromPeekBuffer(e,i,n);if(s+=await this.readRemainderFromStream(e,i+s,n-s),s===0)throw new G;return s}readFromPeekBuffer(e,i,n){let s=n,a=0;for(;this.peekQueue.length>0&&s>0;){const r=this.peekQueue.pop();if(!r)throw new Error("peekData should be defined");const o=Math.min(r.length,s);e.set(r.subarray(0,o),i+a),a+=o,s-=o,o<r.length&&this.peekQueue.push(r.subarray(o))}return a}async readRemainderFromStream(e,i,n){let s=n,a=0;for(;s>0&&!this.endOfStream;){const r=Math.min(s,this.maxStreamReadSize),o=await this.readFromStream(e,i+a,r);if(o===0)break;a+=o,s-=o}return a}}class Ed extends Md{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,i,n){if(this.endOfStream)throw new G;const s=await this.reader.read(new Uint8Array(n));return s.done&&(this.endOfStream=s.done),s.value?(e.set(s.value,i),s.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}}class ua{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose,e!=null&&e.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,i=this.position){const n=new Uint8Array(e.len);if(await this.readBuffer(n,{position:i})<e.len)throw new G;return e.get(n,0)}async peekToken(e,i=this.position){const n=new Uint8Array(e.len);if(await this.peekBuffer(n,{position:i})<e.len)throw new G;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new G;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new G;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const i=this.fileInfo.size-this.position;if(e>i)return this.position+=i,i}return this.position+=e,e}async close(){var e;await this.abort(),await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,i){if(i&&i.position!==void 0&&i.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return i?{mayBeLess:i.mayBeLess===!0,offset:i.offset?i.offset:0,length:i.length?i.length:e.length-(i.offset?i.offset:0),position:i.position?i.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}abort(){return Promise.resolve()}}const Id=256e3;class Rd extends ua{constructor(e,i){super(i),this.streamReader=e}async readBuffer(e,i){const n=this.normalizeOptions(e,i),s=n.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(e,i);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;const a=await this.streamReader.read(e,n.offset,n.length);if(this.position+=a,(!i||!i.mayBeLess)&&a<n.length)throw new G;return a}async peekBuffer(e,i){const n=this.normalizeOptions(e,i);let s=0;if(n.position){const a=n.position-this.position;if(a>0){const r=new Uint8Array(n.length+a);return s=await this.peekBuffer(r,{mayBeLess:n.mayBeLess}),e.set(r.subarray(a),n.offset),s-a}if(a<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{s=await this.streamReader.peek(e,n.offset,n.length)}catch(a){if(i!=null&&i.mayBeLess&&a instanceof G)return 0;throw a}if(!n.mayBeLess&&s<n.length)throw new G}return s}async ignore(e){const i=Math.min(Id,e),n=new Uint8Array(i);let s=0;for(;s<e;){const a=e-s,r=await this.readBuffer(n,{length:Math.min(i,a)});if(r<0)return r;s+=r}return s}abort(){return this.streamReader.abort()}}class Dd extends ua{constructor(e,i){super(i),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,i){if(i!=null&&i.position){if(i.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=i.position}const n=await this.peekBuffer(e,i);return this.position+=n,n}async peekBuffer(e,i){const n=this.normalizeOptions(e,i),s=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&s<n.length)throw new G;return e.set(this.uint8Array.subarray(n.position,n.position+s),n.offset),s}close(){return super.close()}}function da(t,e){return new Rd(new Ed(t),e)}function di(t,e){return new Dd(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Mt=function(t,e,i,n,s){var a,r,o=s*8-n-1,c=(1<<o)-1,u=c>>1,l=-7,d=i?s-1:0,h=i?-1:1,m=t[e+d];for(d+=h,a=m&(1<<-l)-1,m>>=-l,l+=o;l>0;a=a*256+t[e+d],d+=h,l-=8);for(r=a&(1<<-l)-1,a>>=-l,l+=n;l>0;r=r*256+t[e+d],d+=h,l-=8);if(a===0)a=1-u;else{if(a===c)return r?NaN:(m?-1:1)*(1/0);r=r+Math.pow(2,n),a=a-u}return(m?-1:1)*r*Math.pow(2,a-n)},Et=function(t,e,i,n,s,a){var r,o,c,u=a*8-s-1,l=(1<<u)-1,d=l>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,g=n?1:-1,f=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,r=l):(r=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-r))<1&&(r--,c*=2),r+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(r++,c/=2),r+d>=l?(o=0,r=l):r+d>=1?(o=(e*c-1)*Math.pow(2,s),r=r+d):(o=e*Math.pow(2,d-1)*Math.pow(2,s),r=0));s>=8;t[i+m]=o&255,m+=g,o/=256,s-=8);for(r=r<<s|o,u+=s;u>0;t[i+m]=r&255,m+=g,r/=256,u-=8);t[i+m-g]|=f*128};function C(t){return new DataView(t.buffer,t.byteOffset)}const ve={len:1,get(t,e){return C(t).getUint8(e)},put(t,e,i){return C(t).setUint8(e,i),e+1}},ae={len:2,get(t,e){return C(t).getUint16(e,!0)},put(t,e,i){return C(t).setUint16(e,i,!0),e+2}},Ue={len:2,get(t,e){return C(t).getUint16(e)},put(t,e,i){return C(t).setUint16(e,i),e+2}},ha={len:3,get(t,e){const i=C(t);return i.getUint8(e)+(i.getUint16(e+1,!0)<<8)},put(t,e,i){const n=C(t);return n.setUint8(e,i&255),n.setUint16(e+1,i>>8,!0),e+3}},fa={len:3,get(t,e){const i=C(t);return(i.getUint16(e)<<8)+i.getUint8(e+2)},put(t,e,i){const n=C(t);return n.setUint16(e,i>>8),n.setUint8(e+2,i&255),e+3}},R={len:4,get(t,e){return C(t).getUint32(e,!0)},put(t,e,i){return C(t).setUint32(e,i,!0),e+4}},yt={len:4,get(t,e){return C(t).getUint32(e)},put(t,e,i){return C(t).setUint32(e,i),e+4}},hi={len:1,get(t,e){return C(t).getInt8(e)},put(t,e,i){return C(t).setInt8(e,i),e+1}},_d={len:2,get(t,e){return C(t).getInt16(e)},put(t,e,i){return C(t).setInt16(e,i),e+2}},Fd={len:2,get(t,e){return C(t).getInt16(e,!0)},put(t,e,i){return C(t).setInt16(e,i,!0),e+2}},Bd={len:3,get(t,e){const i=ha.get(t,e);return i>8388607?i-16777216:i},put(t,e,i){const n=C(t);return n.setUint8(e,i&255),n.setUint16(e+1,i>>8,!0),e+3}},Ld={len:3,get(t,e){const i=fa.get(t,e);return i>8388607?i-16777216:i},put(t,e,i){const n=C(t);return n.setUint16(e,i>>8),n.setUint8(e+2,i&255),e+3}},ma={len:4,get(t,e){return C(t).getInt32(e)},put(t,e,i){return C(t).setInt32(e,i),e+4}},Nd={len:4,get(t,e){return C(t).getInt32(e,!0)},put(t,e,i){return C(t).setInt32(e,i,!0),e+4}},pa={len:8,get(t,e){return C(t).getBigUint64(e,!0)},put(t,e,i){return C(t).setBigUint64(e,i,!0),e+8}},Od={len:8,get(t,e){return C(t).getBigInt64(e,!0)},put(t,e,i){return C(t).setBigInt64(e,i,!0),e+8}},Vd={len:8,get(t,e){return C(t).getBigUint64(e)},put(t,e,i){return C(t).setBigUint64(e,i),e+8}},jd={len:8,get(t,e){return C(t).getBigInt64(e)},put(t,e,i){return C(t).setBigInt64(e,i),e+8}},Ud={len:2,get(t,e){return Mt(t,e,!1,10,this.len)},put(t,e,i){return Et(t,i,e,!1,10,this.len),e+this.len}},zd={len:2,get(t,e){return Mt(t,e,!0,10,this.len)},put(t,e,i){return Et(t,i,e,!0,10,this.len),e+this.len}},Gd={len:4,get(t,e){return C(t).getFloat32(e)},put(t,e,i){return C(t).setFloat32(e,i),e+4}},Xd={len:4,get(t,e){return C(t).getFloat32(e,!0)},put(t,e,i){return C(t).setFloat32(e,i,!0),e+4}},$d={len:8,get(t,e){return C(t).getFloat64(e)},put(t,e,i){return C(t).setFloat64(e,i),e+8}},Wd={len:8,get(t,e){return C(t).getFloat64(e,!0)},put(t,e,i){return C(t).setFloat64(e,i,!0),e+8}},Kd={len:10,get(t,e){return Mt(t,e,!1,63,this.len)},put(t,e,i){return Et(t,i,e,!1,63,this.len),e+this.len}},Hd={len:10,get(t,e){return Mt(t,e,!0,63,this.len)},put(t,e,i){return Et(t,i,e,!0,63,this.len),e+this.len}};class qd{constructor(e){this.len=e}get(e,i){}}class ga{constructor(e){this.len=e}get(e,i){return e.subarray(i,i+this.len)}}class N{constructor(e,i){this.len=e,this.encoding=i,this.textDecoder=new TextDecoder(i)}get(e,i){return this.textDecoder.decode(e.subarray(i,i+this.len))}}class Yd{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,i=0){return this.textDecoder.decode(e.subarray(i,i+this.len))}}const Gf=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:Yd,Float16_BE:Ud,Float16_LE:zd,Float32_BE:Gd,Float32_LE:Xd,Float64_BE:$d,Float64_LE:Wd,Float80_BE:Kd,Float80_LE:Hd,INT16_BE:_d,INT16_LE:Fd,INT24_BE:Ld,INT24_LE:Bd,INT32_BE:ma,INT32_LE:Nd,INT64_BE:jd,INT64_LE:Od,INT8:hi,IgnoreType:qd,StringType:N,UINT16_BE:Ue,UINT16_LE:ae,UINT24_BE:fa,UINT24_LE:ha,UINT32_BE:yt,UINT32_LE:R,UINT64_BE:Vd,UINT64_LE:pa,UINT8:ve,Uint8ArrayType:ga},Symbol.toStringTag,{value:"Module"})),Zd=Object.prototype.toString,Jd="[object Uint8Array]",Qd="[object ArrayBuffer]";function xa(t,e,i){return t?t.constructor===e?!0:Zd.call(t)===i:!1}function ya(t){return xa(t,Uint8Array,Jd)}function eh(t){return xa(t,ArrayBuffer,Qd)}function th(t){return ya(t)||eh(t)}function ih(t){if(!ya(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function nh(t){if(!th(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const it={utf8:new globalThis.TextDecoder("utf8")};function va(t,e="utf8"){return nh(t),it[e]??(it[e]=new globalThis.TextDecoder(e)),it[e].decode(t)}function ba(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const sh=new globalThis.TextEncoder;function rh(t){return ba(t),sh.encode(t)}const ah=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xf(t){ih(t);let e="";for(let i=0;i<t.length;i++)e+=ah[t[i]];return e}const ys={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function $f(t){if(ba(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,i=new Uint8Array(e);for(let n=0;n<e;n++){const s=ys[t[n*2]],a=ys[t[n*2+1]];if(s===void 0||a===void 0)throw new Error(`Invalid Hex character encountered at position ${n*2}`);i[n]=s<<4|a}return i}function vs(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function Ta(t,e){const i=t.length,n=e.length;if(n===0||n>i)return-1;const s=i-n;for(let a=0;a<=s;a++){let r=!0;for(let o=0;o<n;o++)if(t[a+o]!==e[o]){r=!1;break}if(r)return a}return-1}function oh(t,e){return Ta(t,e)!==-1}function ch(t){return[...t].map(e=>e.charCodeAt(0))}function lh(t,e=0){const i=Number.parseInt(new N(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(i))return!1;let n=8*32;for(let s=e;s<e+148;s++)n+=t[s];for(let s=e+156;s<e+512;s++)n+=t[s];return i===n}const uh={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},dh=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"],hh=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"],bs=4100;async function wa(t){return new fh().fromBuffer(t)}function q(t,e,i){i={offset:0,...i};for(const[n,s]of e.entries())if(i.mask){if(s!==(i.mask[n]&t[n+i.offset]))return!1}else if(s!==t[n+i.offset])return!1;return!0}class fh{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.tokenizerOptions={abortSignal:e==null?void 0:e.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const i=e.position;for(const n of this.detectors||[]){const s=await n(e);if(s)return s;if(i!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const i=e instanceof Uint8Array?e:new Uint8Array(e);if((i==null?void 0:i.length)>1)return this.fromTokenizer(di(i,this.tokenizerOptions))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const i=await da(e,this.tokenizerOptions);try{return await this.fromTokenizer(i)}finally{await i.close()}}async toDetectionStream(e,i){const{sampleSize:n=bs}=i;let s,a;const r=e.getReader({mode:"byob"});try{const{value:u,done:l}=await r.read(new Uint8Array(n));if(a=u,!l&&u)try{s=await this.fromBuffer(u.slice(0,n))}catch(d){if(!(d instanceof G))throw d;s=void 0}a=u}finally{r.releaseLock()}const o=new TransformStream({async start(u){u.enqueue(a)},transform(u,l){l.enqueue(u)}}),c=e.pipeThrough(o);return c.fileType=s,c}check(e,i){return q(this.buffer,e,i)}checkString(e,i){return this.check(ch(e),i)}async parse(e){if(this.buffer=new Uint8Array(bs),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const i=await e.readToken(uh);return e.position+i>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(i),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const i=new DataView(this.buffer.buffer),n={compressedSize:i.getUint32(18,!0),uncompressedSize:i.getUint32(22,!0),filenameLength:i.getUint16(26,!0),extraFieldLength:i.getUint16(28,!0)};if(n.filename=await e.readToken(new N(n.filenameLength,"utf-8")),await e.ignore(n.extraFieldLength),/classes\d*\.dex/.test(n.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if(n.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(n.filename.endsWith(".rels")||n.filename.endsWith(".xml"))switch(n.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(n.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(n.filename.startsWith("3D/")&&n.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(n.filename==="mimetype"&&n.compressedSize===n.uncompressedSize){let s=await e.readToken(new N(n.compressedSize,"utf-8"));switch(s=s.trim(),s){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(n.compressedSize===0){let s=-1;for(;s<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),s=Ta(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(s>=0?s:this.buffer.length)}else await e.ignore(n.compressedSize)}}catch(i){if(!(i instanceof G))throw i}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const i=new Uint8Array(8);return await e.readBuffer(i),q(i,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:q(i,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:q(i,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:q(i,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:q(i,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:q(i,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const i=new N(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(i){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return i.startsWith("3g")?i.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const i=10*1024*1024,n=new Uint8Array(Math.min(i,e.fileInfo.size));if(await e.readBuffer(n,{mayBeLess:!0}),oh(n,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(i){if(!(i instanceof G))throw i}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const i=await this.readTiffHeader(!1);if(i)return i}if(this.check([77,77])){const i=await this.readTiffHeader(!0);if(i)return i}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function i(){const o=await e.peekNumber(ve);let c=128,u=0;for(;!(o&c)&&c!==0;)++u,c>>=1;const l=new Uint8Array(u+1);return await e.readBuffer(l),l}async function n(){const o=await i(),c=await i();c[0]^=128>>c.length-1;const u=Math.min(6,c.length),l=new DataView(o.buffer),d=new DataView(c.buffer,c.length-u,u);return{id:vs(l),len:vs(d)}}async function s(o){for(;o>0;){const c=await n();if(c.id===17026)return(await e.readToken(new N(c.len))).replaceAll(/\00.*$/g,"");await e.ignore(c.len),--o}}const a=await n();switch(await s(a.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const i=new N(4,"latin1").get(this.buffer,2);if(i.match("^d*")&&i>=1e3&&i<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new N(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(i=>this.checkString(i,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function i(){return{length:await e.readToken(ma),type:await e.readToken(new N(4,"latin1"))}}do{const n=await i();if(n.length<0)return;switch(n.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(n.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function i(){const n=new Uint8Array(16);return await e.readBuffer(n),{id:n,size:Number(await e.readToken(pa))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const n=await i();let s=n.size-24;if(q(n.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const a=new Uint8Array(16);if(s-=await e.readBuffer(a),q(a,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(q(a,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new N(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const i=new DataView(this.buffer.buffer).getUint32(12,!0);if(i>12&&this.buffer.length>=i+16)try{const n=new TextDecoder().decode(this.buffer.slice(16,i+16));if(JSON.parse(n).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),lh(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const i=await this.tokenizer.readToken(e?Ue:ae);switch(this.tokenizer.ignore(10),i){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const i=await this.tokenizer.readToken(e?Ue:ae);for(let n=0;n<i;++n){const s=await this.readTiffTag(e);if(s)return s}}async readTiffHeader(e){const i=(e?Ue:ae).get(this.buffer,2),n=(e?yt:R).get(this.buffer,4);if(i===42){if(n>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(n>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(n),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(i===43)return{ext:"tif",mime:"image/tiff"}}}new Set(dh);new Set(hh);var Yi={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Ts=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,mh=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,Sa=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,ph=/\\([\u000b\u0020-\u00ff])/g,gh=/([\\"])/g,Aa=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Yi.format=xh;Yi.parse=yh;function xh(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,i=t.type;if(!i||!Aa.test(i))throw new TypeError("invalid type");var n=i;if(e&&typeof e=="object")for(var s,a=Object.keys(e).sort(),r=0;r<a.length;r++){if(s=a[r],!Sa.test(s))throw new TypeError("invalid parameter name");n+="; "+s+"="+bh(e[s])}return n}function yh(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?vh(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var i=e.indexOf(";"),n=i!==-1?e.slice(0,i).trim():e.trim();if(!Aa.test(n))throw new TypeError("invalid media type");var s=new Th(n.toLowerCase());if(i!==-1){var a,r,o;for(Ts.lastIndex=i;r=Ts.exec(e);){if(r.index!==i)throw new TypeError("invalid parameter format");i+=r[0].length,a=r[1].toLowerCase(),o=r[2],o.charCodeAt(0)===34&&(o=o.slice(1,-1),o.indexOf("\\")!==-1&&(o=o.replace(ph,"$1"))),s.parameters[a]=o}if(i!==e.length)throw new TypeError("invalid parameter format")}return s}function vh(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function bh(t){var e=String(t);if(Sa.test(e))return e;if(e.length>0&&!mh.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(gh,"\\$1")+'"'}function Th(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var wh=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,Sh=Ah;function Ah(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=wh.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var i=e[1],n=e[2],s,a=n.lastIndexOf("+");return a!==-1&&(s=n.substr(a+1),n=n.substr(0,a)),new Ch(i,n,s)}function Ch(t,e,i){this.type=t,this.subtype=e,this.suffix=i}var fi={exports:{}},Kt,ws;function kh(){if(ws)return Kt;ws=1;var t=1e3,e=t*60,i=e*60,n=i*24,s=n*7,a=n*365.25;Kt=function(l,d){d=d||{};var h=typeof l;if(h==="string"&&l.length>0)return r(l);if(h==="number"&&isFinite(l))return d.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function r(l){if(l=String(l),!(l.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(d){var h=parseFloat(d[1]),m=(d[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*a;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*i;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(l){var d=Math.abs(l);return d>=n?Math.round(l/n)+"d":d>=i?Math.round(l/i)+"h":d>=e?Math.round(l/e)+"m":d>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var d=Math.abs(l);return d>=n?u(l,d,n,"day"):d>=i?u(l,d,i,"hour"):d>=e?u(l,d,e,"minute"):d>=t?u(l,d,t,"second"):l+" ms"}function u(l,d,h,m){var g=d>=h*1.5;return Math.round(l/h)+" "+m+(g?"s":"")}return Kt}function Ph(t){i.debug=i,i.default=i,i.coerce=c,i.disable=a,i.enable=s,i.enabled=r,i.humanize=kh(),i.destroy=u,Object.keys(t).forEach(l=>{i[l]=t[l]}),i.names=[],i.skips=[],i.formatters={};function e(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return i.colors[Math.abs(d)%i.colors.length]}i.selectColor=e;function i(l){let d,h=null,m,g;function f(...y){if(!f.enabled)return;const x=f,v=Number(new Date),T=v-(d||v);x.diff=T,x.prev=d,x.curr=v,d=v,y[0]=i.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let w=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(P,D)=>{if(P==="%%")return"%";w++;const k=i.formatters[D];if(typeof k=="function"){const F=y[w];P=k.call(x,F),y.splice(w,1),w--}return P}),i.formatArgs.call(x,y),(x.log||i.log).apply(x,y)}return f.namespace=l,f.useColors=i.useColors(),f.color=i.selectColor(l),f.extend=n,f.destroy=i.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==i.namespaces&&(m=i.namespaces,g=i.enabled(l)),g),set:y=>{h=y}}),typeof i.init=="function"&&i.init(f),f}function n(l,d){const h=i(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function s(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),m=h.length;for(d=0;d<m;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function a(){const l=[...i.names.map(o),...i.skips.map(o).map(d=>"-"+d)].join(",");return i.enable(""),l}function r(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=i.skips.length;d<h;d++)if(i.skips[d].test(l))return!1;for(d=0,h=i.names.length;d<h;d++)if(i.names[d].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var Mh=Ph;(function(t,e){e.formatArgs=n,e.save=s,e.load=a,e.useColors=i,e.storage=r(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(l++,h==="%c"&&(d=l))}),c.splice(d,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function r(){try{return localStorage}catch{}}t.exports=Mh(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(fi,fi.exports);var Eh=fi.exports;const It=Na(Eh);var Ss;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(Ss||(Ss={}));var mi;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(mi||(mi={}));const qe=t=>class extends Error{constructor(i){super(i),this.name=t}};class Ih extends qe("CouldNotDetermineFileTypeError"){}class Rh extends qe("UnsupportedFileTypeError"){}class Dh extends qe("UnexpectedFileContentError"){constructor(e,i){super(i),this.fileType=e}toString(){return`${this.name} (FileType: ${this.fileType}): ${this.message}`}}class Zi extends qe("FieldDecodingError"){}class Ca extends qe("InternalParserError"){}const _h=t=>class extends Dh{constructor(e){super(t,e)}};function Le(t,e,i){return(t[e]&1<<i)!==0}function As(t,e,i,n){let s=e;if(n==="utf-16le"){for(;t[s]!==0||t[s+1]!==0;){if(s>=i)return i;s+=2}return s}for(;t[s]!==0;){if(s>=i)return i;s++}return s}function Fh(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function Bh(t){const e=t.length;if(e&1)throw new Zi("Buffer length must be even");for(let i=0;i<e;i+=2){const n=t[i];t[i]=t[i+1],t[i+1]=n}return t}function pi(t,e){if(t[0]===255&&t[1]===254)return pi(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Zi("Expected even number of octets for 16-bit unicode string");return pi(Bh(t),e)}return new N(t.length,e).get(t,0)}function Kf(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ka(t,e,i,n){const s=e+~~(i/8),a=i%8;let r=t[s];r&=255>>a;const o=8-a,c=n-o;return c<0?r>>=8-a-n:c>0&&(r<<=c,r|=ka(t,e,i+o,c)),r}function Hf(t,e,i){return ka(t,e,i,1)===1}function Lh(t){const e=[];for(let i=0,n=t.length;i<n;i++){const s=Number(t.charCodeAt(i)).toString(16);e.push(s.length===1?`0${s}`:s)}return e.join(" ")}function Nh(t){return 10*Math.log10(t)}function Oh(t){return 10**(t/10)}function Vh(t){const e=t.split(" ").map(i=>i.trim().toLowerCase());if(e.length>=1){const i=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:i,ratio:Oh(i)}:{dB:Nh(i),ratio:i}}}var Cs;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(Cs||(Cs={}));var ks;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(ks||(ks={}));var Ps;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(Ps||(Ps={}));const jh={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},qf={len:10,get:(t,e)=>({fileIdentifier:new N(3,"ascii").get(t,e),version:{major:hi.get(t,e+3),revision:hi.get(t,e+4)},flags:{unsynchronisation:Le(t,e+5,7),isExtendedHeader:Le(t,e+5,6),expIndicator:Le(t,e+5,5),footer:Le(t,e+5,4)},size:jh.get(t,e+6)})},Yf={len:10,get:(t,e)=>({size:yt.get(t,e),extendedFlags:Ue.get(t,e+4),sizeOfPadding:yt.get(t,e+6),crcDataPresent:Le(t,e+4,31)})},Uh={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},zh={len:4,get:(t,e)=>({encoding:Uh.get(t,e),language:new N(3,"latin1").get(t,e+1)})},Zf={len:6,get:(t,e)=>{const i=zh.get(t,e);return{encoding:i.encoding,language:i.language,timeStampFormat:ve.get(t,e+4),contentType:ve.get(t,e+5)}}},vt={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function Gh(t){return vt[t]&&!vt[t].multiple}function Xh(t){return!vt[t].multiple||vt[t].unique||!1}class X{static toIntOrNull(e){const i=Number.parseInt(e,10);return Number.isNaN(i)?null:i}static normalizeTrack(e){const i=e.toString().split("/");return{no:Number.parseInt(i[0],10)||null,of:Number.parseInt(i[1],10)||null}}constructor(e,i){this.tagTypes=e,this.tagMap=i}mapGenericTag(e,i){e={id:e.id,value:e.value},this.postMap(e,i);const n=this.getCommonName(e.id);return n?{id:n,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,i){}}X.maxRatingScore=1;const $h={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class Wh extends X{constructor(){super(["ID3v1"],$h)}}class Ye extends X{constructor(e,i){const n={};for(const s of Object.keys(i))n[s.toUpperCase()]=i[s];super(e,n)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const Kh={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Ji extends Ye{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*X.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],Kh)}postMap(e,i){switch(e.id){case"UFID":{const n=e.value;n.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${n.owner_identifier}`,e.value=pi(n.identifier,"latin1"))}break;case"PRIV":{const n=e.value;switch(n.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${n.owner_identifier}`,e.value=n.data.length===4?R.get(n.data,0):null,e.value===null&&i.addWarning("Failed to parse PRIV:PeakValue");break;default:i.addWarning(`Unknown PRIV owner-identifier: ${n.data}`)}}break;case"POPM":e.value=Ji.toRating(e.value);break}}}const Hh={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Qi extends X{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],Hh)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const i=e.id.split(":");e.value=Qi.toRating(e.value),e.id=i[0];break}}}}const qh={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class Yh extends Ye{constructor(){super(["ID3v2.2"],qh)}}const Zh={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class Jh extends Ye{constructor(){super(["APEv2"],Zh)}}const Qh={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},ef="iTunes";class Ms extends Ye{constructor(){super([ef],Qh)}postMap(e,i){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const tf={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class bt extends X{static toRating(e,i,n){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(i)/n*X.maxRatingScore}}constructor(){super(["vorbis"],tf)}postMap(e){if(e.id==="RATING")e.value=bt.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const i=e.id.split(":");e.value=bt.toRating(i[1],e.value,1),e.id=i[0]}}}const nf={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class sf extends X{constructor(){super(["exif"],nf)}}const rf={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class af extends Ye{constructor(){super(["matroska"],rf)}}const of={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class cf extends X{constructor(){super(["AIFF"],of)}}class lf{constructor(){this.tagMappers={},[new Wh,new Yh,new Ji,new Ms,new Ms,new bt,new Jh,new Qi,new sf,new af,new cf].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,i,n){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(i,n);throw new Ca(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const i of e.tagTypes)this.tagMappers[i]=e}}const he=It("music-metadata:collector"),uf=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class df{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new lf;let i=1;for(const n of uf)this.originPriority[n]=i++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){he(`streamInfo: type=${e.type?mi[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,i){var n;he(`format: ${e} = ${i}`),this.format[e]=i,(n=this.opts)!=null&&n.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:i}})}async addTag(e,i,n){he(`tag ${e}.${i} = ${n}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:i,value:n}),await this.toCommon(e,i,n)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,i){switch(i.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:i.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:i.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(i.value)===-1)){const n=(this.common.artists||[]).concat([i.value]),a={id:"artist",value:hf(n)};this.setGenericTag("artificial",a)}break;case"picture":return this.postFixPicture(i.value).then(n=>{n!==null&&(i.value=n,this.setGenericTag(e,i))});case"totaltracks":this.common.track.of=X.toIntOrNull(i.value);return;case"totaldiscs":this.common.disk.of=X.toIntOrNull(i.value);return;case"movementTotal":this.common.movementIndex.of=X.toIntOrNull(i.value);return;case"track":case"disk":case"movementIndex":{const n=this.common[i.id].of;this.common[i.id]=X.normalizeTrack(i.value),this.common[i.id].of=n??this.common[i.id].of;return}case"bpm":case"year":case"originalyear":i.value=Number.parseInt(i.value,10);break;case"date":{const n=Number.parseInt(i.value.substr(0,4),10);Number.isNaN(n)||(this.common.year=n);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":i.value=typeof i.value=="string"?Number.parseInt(i.value,10):i.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":i.value=Vh(i.value);break;case"replaygain_track_minmax":i.value=i.value.split(",").map(n=>Number.parseInt(n,10));break;case"replaygain_undo":{const n=i.value.split(",").map(s=>Number.parseInt(s,10));i.value={leftChannel:n[0],rightChannel:n[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":i.value=i.value==="1"||i.value===1;break;case"isrc":{const n=this.common[i.id];if(n&&n.indexOf(i.value)!==-1)return;break}case"comment":typeof i.value=="string"&&(i.value={text:i.value}),i.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:i.value.text==="1"});break}i.value!==null&&this.setGenericTag(e,i)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const i=await wa(Uint8Array.from(e.data));if(i)e.format=i.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,i,n){const s={id:i,value:n},a=this.tagMapper.mapTag(e,s,this);a&&await this.postMap(e,a)}setGenericTag(e,i){var a;he(`common.${i.id} = ${i.value}`);const n=this.commonOrigin[i.id]||1e3,s=this.originPriority[e];if(Gh(i.id))if(s<=n)this.common[i.id]=i.value,this.commonOrigin[i.id]=s;else return he(`Ignore native tag (singleton): ${e}.${i.id} = ${i.value}`);else if(s===n)!Xh(i.id)||this.common[i.id].indexOf(i.value)===-1?this.common[i.id].push(i.value):he(`Ignore duplicate value: ${e}.${i.id} = ${i.value}`);else if(s<n)this.common[i.id]=[i.value],this.commonOrigin[i.id]=s;else return he(`Ignore native tag (list): ${e}.${i.id} = ${i.value}`);(a=this.opts)!=null&&a.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:i.id,value:i.value}})}}function hf(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}const ff={parserType:"mpeg",extensions:[".mp2",".mp3",".m2a",".aac","aacp"],async load(t,e,i){return new(await z(()=>import("./MpegParser-d8609ba0.js"),["assets/MpegParser-d8609ba0.js","assets/AbstractID3Parser-5bec71f4.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).MpegParser(t,e,i)}},mf={parserType:"apev2",extensions:[".ape"],async load(t,e,i){return new(await z(()=>Promise.resolve().then(()=>Df),void 0)).APEv2Parser(t,e,i)}},pf={parserType:"asf",extensions:[".asf"],async load(t,e,i){return new(await z(()=>import("./AsfParser-5638da81.js"),["assets/AsfParser-5638da81.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).AsfParser(t,e,i)}},gf={parserType:"dsdiff",extensions:[".dff"],async load(t,e,i){return new(await z(()=>import("./DsdiffParser-b8f58ad3.js"),["assets/DsdiffParser-b8f58ad3.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).DsdiffParser(t,e,i)}},xf={parserType:"aiff",extensions:[".aif","aiff","aifc"],async load(t,e,i){return new(await z(()=>import("./AiffParser-dd38e00e.js"),["assets/AiffParser-dd38e00e.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).AIFFParser(t,e,i)}},yf={parserType:"dsf",extensions:[".dsf"],async load(t,e,i){return new(await z(()=>import("./DsfParser-3d34fdb1.js"),["assets/DsfParser-3d34fdb1.js","assets/AbstractID3Parser-5bec71f4.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).DsfParser(t,e,i)}},vf={parserType:"flac",extensions:[".flac"],async load(t,e,i){return new(await z(()=>import("./FlacParser-af8d33d2.js"),["assets/FlacParser-af8d33d2.js","assets/VorbisParser-bde73194.js","assets/AbstractID3Parser-5bec71f4.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).FlacParser(t,e,i)}},bf={parserType:"matroska",extensions:[".mka",".mkv",".mk3d",".mks","webm"],async load(t,e,i){return new(await z(()=>import("./MatroskaParser-588d832a.js"),["assets/MatroskaParser-588d832a.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).MatroskaParser(t,e,i)}},Tf={parserType:"mp4",extensions:[".mp4",".m4a",".m4b",".m4pa","m4v","m4r","3gp"],async load(t,e,i){return new(await z(()=>import("./MP4Parser-e9f09801.js"),["assets/MP4Parser-e9f09801.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).MP4Parser(t,e,i)}},wf={parserType:"musepack",extensions:[".mpc"],async load(t,e,i){return new(await z(()=>import("./MusepackParser-4bed52d0.js"),["assets/MusepackParser-4bed52d0.js","assets/AbstractID3Parser-5bec71f4.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).MusepackParser(t,e,i)}},Sf={parserType:"ogg",extensions:[".ogg",".ogv",".oga",".ogm",".ogx",".opus",".spx"],async load(t,e,i){return new(await z(()=>import("./OggParser-e2da1bf2.js"),["assets/OggParser-e2da1bf2.js","assets/VorbisParser-bde73194.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).OggParser(t,e,i)}},Af={parserType:"wavpack",extensions:[".wv",".wvp"],async load(t,e,i){return new(await z(()=>import("./WavPackParser-9c40f1ba.js"),["assets/WavPackParser-9c40f1ba.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).WavPackParser(t,e,i)}},Cf={parserType:"riff",extensions:[".wav","wave",".bwf"],async load(t,e,i){return new(await z(()=>import("./WaveParser-398627d8.js"),["assets/WaveParser-398627d8.js","assets/ID3v2Parser-c958df29.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).WaveParser(t,e,i)}},kf={parserType:"amr",extensions:[".amr"],async load(t,e,i){return new(await z(()=>import("./AmrParser-338abdfe.js"),["assets/AmrParser-338abdfe.js","assets/index-19c48e4a.js","assets/index-22340b77.css"])).AmrParser(t,e,i)}},Ne=It("music-metadata:parser:factory");function Pf(t){const e=Yi.parse(t),i=Sh(e.type);return{type:i.type,subtype:i.subtype,suffix:i.suffix,parameters:e.parameters}}class Mf{constructor(){this.parsers=[],[vf,ff,mf,Tf,bf,Cf,Sf,pf,xf,Af,wf,yf,gf,kf].forEach(e=>this.registerParser(e))}registerParser(e){this.parsers.push(e)}async parse(e,i,n){if(!i){const r=new Uint8Array(4100);if(e.fileInfo.mimeType&&(i=this.findLoaderForType(Es(e.fileInfo.mimeType))),!i&&e.fileInfo.path&&(i=this.findLoaderForExtension(e.fileInfo.path)),!i){Ne("Guess parser on content..."),await e.peekBuffer(r,{mayBeLess:!0});const o=await wa(r);if(!o||!o.mime)throw new Ih("Failed to determine audio format");if(Ne(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),i=this.findLoaderForType(Es(o.mime)),!i)throw new Rh(`Guessed MIME-type not supported: ${o.mime}`)}}Ne(`Loading ${i.parserType} parser...`);const s=new df(n),a=await i.load(s,e,n??{});return Ne(`Parser ${i.parserType} loaded`),await a.parse(),s.toCommonMetadata()}findLoaderForExtension(e){if(!e)return;const i=Ef(e).toLocaleLowerCase()||e;return this.parsers.find(n=>n.extensions.indexOf(i)!==-1)}findLoaderForType(e){return e?this.parsers.find(i=>i.parserType===e):void 0}}function Ef(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function Es(t){let e;if(!t)return;try{e=Pf(t)}catch{Ne(`Invalid HTTP Content-Type header value: ${t}`);return}const i=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(i){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"mpeg";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf";case"amr":return"amr"}break;case"video":switch(i){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(i){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}class Pa{constructor(e,i,n){this.metadata=e,this.tokenizer=i,this.options=n}}const If=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/,Ma={len:4,get:(t,e)=>{const i=va(t.slice(e,e+Ma.len),"latin1");if(!i.match(If))throw new Zi(`FourCC contains invalid characters: ${Lh(i)} "${i}"`);return i},put:(t,e,i)=>{const n=rh(i);if(n.length!==4)throw new Ca("Invalid length");return t.set(n,e),e+4}};var Me;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Me||(Me={}));const Is={len:52,get:(t,e)=>({ID:Ma.get(t,e),version:R.get(t,e+4)/1e3,descriptorBytes:R.get(t,e+8),headerBytes:R.get(t,e+12),seekTableBytes:R.get(t,e+16),headerDataBytes:R.get(t,e+20),apeFrameDataBytes:R.get(t,e+24),apeFrameDataBytesHigh:R.get(t,e+28),terminatingDataBytes:R.get(t,e+32),fileMD5:new ga(16).get(t,e+36)})},Rf={len:24,get:(t,e)=>({compressionLevel:ae.get(t,e),formatFlags:ae.get(t,e+2),blocksPerFrame:R.get(t,e+4),finalFrameBlocks:R.get(t,e+8),totalFrames:R.get(t,e+12),bitsPerSample:ae.get(t,e+16),channel:ae.get(t,e+18),sampleRate:R.get(t,e+20)})},K={len:32,get:(t,e)=>({ID:new N(8,"ascii").get(t,e),version:R.get(t,e+8),size:R.get(t,e+12),fields:R.get(t,e+16),flags:Ea(R.get(t,e+20))})},Ht={len:8,get:(t,e)=>({size:R.get(t,e),flags:Ea(R.get(t,e+4))})};function Ea(t){return{containsHeader:nt(t,31),containsFooter:nt(t,30),isHeader:nt(t,29),readOnly:nt(t,0),dataType:(t&6)>>1}}function nt(t,e){return(t&1<<e)!==0}const fe=It("music-metadata:parser:APEv2"),Rs="APEv2",Ds="APETAGEX";class lt extends _h("APEv2"){}class xe extends Pa{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,i,n){return new xe(e,i,n).tryParseApeHeader()}static calculateDuration(e){let i=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return i+=e.finalFrameBlocks,i/e.sampleRate}static async findApeFooterOffset(e,i){const n=new Uint8Array(K.len);await e.randomRead(n,0,K.len,i-K.len);const s=K.get(n,0);if(s.ID==="APETAGEX")return s.flags.isHeader?fe(`APE Header found at offset=${i-K.len}`):(fe(`APE Footer found at offset=${i-K.len}`),i-=s.size),{footer:s,offset:i}}static parseTagFooter(e,i,n){const s=K.get(i,i.length-K.len);if(s.ID!==Ds)throw new lt("Unexpected APEv2 Footer ID preamble value");return di(i),new xe(e,di(i),n).parseTags(s)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<K.len){fe("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(K);if(e.ID===Ds)return await this.tokenizer.ignore(K.len),this.parseTags(e);if(fe(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const i=this.tokenizer.fileInfo.size-this.tokenizer.position,n=new Uint8Array(i);return await this.tokenizer.readBuffer(n),xe.parseTagFooter(this.metadata,n,this.options)}}async parse(){const e=await this.tokenizer.readToken(Is);if(e.ID!=="MAC ")throw new lt("Unexpected descriptor ID");this.ape.descriptor=e;const i=e.descriptorBytes-Is.len,n=await(i>0?this.parseDescriptorExpansion(i):this.parseHeader());return await this.tokenizer.ignore(n.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const i=new Uint8Array(256);let n=e.size-K.len;fe(`Parse APE tags at offset=${this.tokenizer.position}, size=${n}`);for(let s=0;s<e.fields;s++){if(n<Ht.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-s} items remaining, but no more tag data to read.`);break}const a=await this.tokenizer.readToken(Ht);n-=Ht.len+a.size,await this.tokenizer.peekBuffer(i,{length:Math.min(i.length,n)});let r=As(i,0,i.length);const o=await this.tokenizer.readToken(new N(r,"ascii"));switch(await this.tokenizer.ignore(1),n-=o.length+1,a.flags.dataType){case Me.text_utf8:{const u=(await this.tokenizer.readToken(new N(a.size,"utf8"))).split(/\x00/g);await Promise.all(u.map(l=>this.metadata.addTag(Rs,o,l)));break}case Me.binary:if(this.options.skipCovers)await this.tokenizer.ignore(a.size);else{const c=new Uint8Array(a.size);await this.tokenizer.readBuffer(c),r=As(c,0,c.length);const u=va(c.slice(0,r)),l=c.slice(r+1);await this.metadata.addTag(Rs,o,{description:u,data:l})}break;case Me.external_info:fe(`Ignore external info ${o}`),await this.tokenizer.ignore(a.size);break;case Me.reserved:fe(`Ignore external info ${o}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${o}"`),await this.tokenizer.ignore(a.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(Rf);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",xe.calculateDuration(e)),!this.ape.descriptor)throw new lt("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Df=Object.freeze(Object.defineProperty({__proto__:null,APEv2Parser:xe,ApeContentError:lt},Symbol.toStringTag,{value:"Module"})),st=It("music-metadata:parser:ID3v1"),_s=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],rt={len:128,get:(t,e)=>{const i=new we(3).get(t,e);return i==="TAG"?{header:i,title:new we(30).get(t,e+3),artist:new we(30).get(t,e+33),album:new we(30).get(t,e+63),year:new we(4).get(t,e+93),comment:new we(28).get(t,e+97),zeroByte:ve.get(t,e+127),track:ve.get(t,e+126),genre:ve.get(t,e+127)}:null}};class we{constructor(e){this.len=e,this.stringType=new N(e,"latin1")}get(e,i){let n=this.stringType.get(e,i);return n=Fh(n),n=n.trim(),n.length>0?n:void 0}}class Ia extends Pa{constructor(e,i,n){super(e,i,n),this.apeHeader=n.apeHeader}static getGenre(e){if(e<_s.length)return _s[e]}async parse(){if(!this.tokenizer.fileInfo.size){st("Skip checking for ID3v1 because the file-size is unknown");return}this.apeHeader&&(this.tokenizer.ignore(this.apeHeader.offset-this.tokenizer.position),await new xe(this.metadata,this.tokenizer,this.options).parseTags(this.apeHeader.footer));const e=this.tokenizer.fileInfo.size-rt.len;if(this.tokenizer.position>e){st("Already consumed the last 128 bytes");return}const i=await this.tokenizer.readToken(rt,e);if(i){st("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-rt.len);const n=["title","artist","album","comment","track","year"];for(const a of n)i[a]&&i[a]!==""&&await this.addTag(a,i[a]);const s=Ia.getGenre(i.genre);s&&await this.addTag("genre",s)}else st("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-rt.len)}async addTag(e,i){await this.metadata.addTag("ID3v1",e,i)}}async function Ra(t,e={}){const i={mimeType:t.type,size:t.size};return t instanceof File&&(i.path=t.name),_f(t.stream(),i,e)}function _f(t,e,i={}){return Ff(da(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),i)}function Ff(t,e){return new Mf().parse(t,void 0,e)}function gi(t){return Oa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(t)}const Bf=({loadingRefresh:t,refreshMP3Link:e,setCurrentMP3:i,mp3List:n})=>{const[s,a]=b.useState([]),[r,o]=b.useState(null),[c,u]=b.useState(new Map),[l,d]=b.useState(!1),h=b.useRef(new Map),m=async(f,y,x)=>{try{const v=await fetch(f.url);if(!v.ok)throw new Error(`Failed to fetch: ${v.statusText}`);const T=await v.blob(),S=(await Ra(T)).common.artist||"Unknown Artist";x.has(S)||x.set(S,[]),x.get(S).push(f),y.add(S),a([...y]),h.current=new Map(x),u(P=>{const D=new Map(P);return D.delete(f.id),D})}catch(v){console.error(v),u(T=>new Map(T).set(f.id,f))}};b.useEffect(()=>{const f=async()=>{d(!0);const y=new Set,x=new Map;await Promise.all(n.map(v=>m(v,y,x))),d(!1)};n.length>0&&f()},[n,t]);const g=async f=>{try{for(await e(f);t;)await new Promise(v=>setTimeout(v,100));const y=new Set(s),x=new Map(h.current);await m(f,y,x)}catch(y){console.error("Error refreshing MP3 link:",y)}};return r?p.jsx("div",{className:"text-red-500",children:r}):p.jsxs("div",{className:"p-6 mt-10 w-full  max-w-[1050px] mx-auto",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-white text-center",children:"Artists"}),p.jsxs("table",{className:"min-w-full border border-[#333]",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Artist"}),p.jsx("th",{className:"py-2 px-4 text-left text-[#1A1A1A] bg-[#4ADA31]",children:"Songs"})]})}),p.jsx("tbody",{children:s.map((f,y)=>{const x=h.current.get(f)||[];return p.jsxs("tr",{className:"border-b border-gray-800",children:[p.jsx("td",{className:"py-4 px-4 text-[#1A1A1A] bg-[#4ADA31] font-bold",children:f}),p.jsx("td",{className:"py-4 px-4",children:p.jsxs("ul",{children:[x.length===0&&p.jsx("li",{className:"text-gray-400 italic",children:"No songs available."}),x.map((v,T)=>p.jsxs("li",{className:"text-gray-300 flex items-center space-x-2",children:[p.jsx("span",{onClick:()=>i(v),className:"underline sm:no-underline cursor-pointer",children:v.title||`Song ${v.id}`}),c.has(v.id)&&p.jsx("button",{onClick:()=>g(v),className:"text-red-500 hover:text-red-700",title:"Refresh Link",children:p.jsx(gi,{})})]},T))]})})]},y)})})]}),c.size>0&&p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-xl font-bold text-white",children:"Failed Links"}),p.jsxs("table",{className:"min-w-full border border-[#333] mt-2",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Song Title"}),p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Action"})]})}),p.jsx("tbody",{children:Array.from(c.values()).map((f,y)=>p.jsxs("tr",{className:"border-b border-gray-700",children:[p.jsx("td",{className:"py-4 px-4 text-gray-300",children:f.title||`Song ${f.id}`}),p.jsx("td",{className:"py-4 px-4",children:p.jsx("button",{onClick:()=>g(f),className:"text-red-500 hover:text-red-700",title:"Refresh Link",children:p.jsx(gi,{})})})]},y))})]})]}),l&&p.jsx("div",{className:"flex justify-center py-4",children:p.jsx(ut,{})})]})},Lf=({refreshMP3Link:t,loadingRefresh:e,loading:i,setCurrentMP3:n,mp3List:s})=>{const[a,r]=b.useState([]),[o,c]=b.useState(null),[u,l]=b.useState(new Map),d=b.useRef(new Map),h=async(g,f,y)=>{try{const x=await fetch(g.url);if(!x.ok)throw new Error(`Failed to fetch: ${x.statusText}`);const v=await x.blob(),w=(await Ra(v)).common.album||"Unknown Album";y.has(w)||y.set(w,[]),y.get(w).push(g),f.add(w),r([...f]),d.current=new Map(y),l(S=>{const P=new Map(S);return P.delete(g.id),P})}catch(x){console.error(x),l(v=>new Map(v).set(g.id,g))}};b.useEffect(()=>{const g=async()=>{const f=new Set,y=new Map;await Promise.all(s.map(x=>h(x,f,y)))};s.length>0&&g()},[s,e]);const m=async g=>{try{for(await t(g);e;)await new Promise(x=>setTimeout(x,100));const f=new Set(a),y=new Map(d.current);await h(g,f,y)}catch(f){console.error("Error refreshing MP3 link:",f)}};return o?p.jsx("div",{className:"text-red-500",children:o}):p.jsxs("div",{className:"p-6 mt-10 w-full max-w-[1050px] mx-auto",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-white text-center",children:"Albums"}),p.jsxs("table",{className:"min-w-full border border-[#333] mb-6",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Album"}),p.jsx("th",{className:"py-2 px-4 text-left text-[#1A1A1A] bg-[#4ADA31]",children:"Songs"})]})}),p.jsx("tbody",{children:a.map((g,f)=>{const y=d.current.get(g)||[];return p.jsxs("tr",{className:"border-b border-gray-700",children:[p.jsx("td",{className:"py-4 px-4 text-[#1A1A1A] bg-[#4ADA31] font-bold",children:g}),p.jsx("td",{className:"py-4 px-4",children:p.jsxs("ul",{children:[y.length===0&&p.jsx("li",{className:"text-gray-500 italic",children:"No songs available."}),y.map((x,v)=>p.jsx("li",{className:"text-gray-300 flex items-center space-x-2",children:p.jsx("span",{className:" underline sm:no-underline cursor-pointer rounded",children:x.title||`Song ${x.id}`})},v))]})})]},f)})})]}),u.size>0&&p.jsxs(p.Fragment,{children:[p.jsx("h3",{className:"text-xl font-bold mb-4 text-white text-center",children:"Failed Links"}),p.jsxs("table",{className:"min-w-full border border-[#333]",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Song"}),p.jsx("th",{className:"py-2 px-4 text-left text-gray-300",children:"Action"})]})}),p.jsx("tbody",{children:Array.from(u.values()).map((g,f)=>p.jsxs("tr",{className:"border-b border-gray-700",children:[p.jsx("td",{className:"py-4 px-4 text-gray-300",children:g.title||`Song ${g.id}`}),p.jsx("td",{className:"py-4 px-4",children:p.jsx("button",{onClick:()=>m(g),className:"text-red-500 hover:text-red-700",title:"Refresh Link",children:p.jsx(gi,{})})})]},f))})]})]}),i&&p.jsx("div",{className:"flex justify-center py-4",children:p.jsx(ut,{})})]})};async function Nf(t,e){try{const i=Va.currentUser;if(!i)throw new Error("User is not logged in.");const n=i.uid,s=Bs(Ls,`users/${n}/mp3s`,t);await ja(s,e),console.log(`MP3 with ID ${t} updated successfully!`)}catch(i){console.error("Failed to update MP3:",i.message)}}const Of=async(t,e,i,n,s,a,r)=>{try{const o=await fetch(t,{method:"HEAD",headers:{"Cache-Control":"no-cache"}});return o.status===206||o.status===200?(n.info("Link is fresh and valid"),!0):o.status===401||o.status===410?(n.info("Link requires refresh due to 401/410 status."),await qt(n,e,i,a,r),!1):(n.error("Unexpected status encountered. Link might need refresh."),await qt(n,e,i,a,r),!1)}catch(o){return console.error("Error checking the link:",o.message),n.info("Link checks failed. Attempting to refresh."),await qt(n,e,i,a,r),!1}},qt=async(t,e,i,n,s)=>{const a=await Ua(n,s);try{const o=await za({method:"get",url:"https://youtube-mp36.p.rapidapi.com/dl",headers:{"X-RapidAPI-Key":"bb6ca9e02bmsh37ace359628eb67p1cfcfcjsn8051f8356a0f","X-RapidAPI-Host":"youtube-mp36.p.rapidapi.com"},params:{id:e}}),{link:c}=o==null?void 0:o.data;if(!c){t.error("No download link provided. Please try again later.");return}const u=a.map(d=>d.youtubeID===e?{...d,url:c}:d),l=u.find(d=>d.youtubeID===e);if(l)return await Nf(e,l),i(u),t.success("Link refreshed and replaced successfully!"),!0}catch(r){return t.error("Failed to refresh the link. Please try again."),console.error("Error refreshing the link:",r),!1}},Vf=()=>{const[t,e]=b.useState("Songs"),[i,n]=b.useState(0),[s,a]=b.useState(null),[r,o]=b.useState(null),{mp3List:c,setMP3List:u,loading:l}=b.useContext(Ga),{authUser:d,loadingUser:h}=b.useContext(Xa),m=async w=>{o(!0);try{await Of(w.url,w.youtubeID,u,_t,w.fileSize,d,h)}catch(S){console.error("Error refreshing the link:",S)}finally{o(!1)}},g={Songs:{component:()=>p.jsx(kd,{authUser:d,loadingRefresh:r,refreshMP3Link:m,mp3List:c,loading:l,setMP3List:u,toast:_t,setCurrentMP3:a}),index:0},Artists:{component:()=>p.jsx(Bf,{loadingRefresh:r,refreshMP3Link:m,setCurrentMP3:a,mp3List:c}),index:1},Albums:{component:()=>p.jsx(Lf,{refreshMP3Link:m,loadingRefresh:r,setCurrentMP3:a,mp3List:c}),index:2}},f=w=>{n(g[t].index),e(w)},x=g[t].index>i?1:-1,v={initial:w=>({x:w>0?"100%":"-100%",opacity:0}),animate:{x:0,opacity:1},exit:w=>({x:w>0?"-100%":"100%",opacity:0})},T=()=>{const w=!l&&c.findIndex(S=>S.id===s.id);w<c.length-1&&a(c[w+1])};return p.jsxs("div",{className:"h-full min-h-screen pt-10 pb-32 bg-[#1A1A1A] text-white",children:[p.jsx($a,{position:"bottom-right",autoClose:1500,closeOnClick:!0,limit:4}),p.jsx("div",{className:"mt-20 flex justify-center space-x-3 items-center",children:["Songs","Artists","Albums"].map(w=>p.jsx("button",{onClick:()=>f(w),className:`${t===w?"text-[#4ADA31]":"text-white"}`,children:w},w))}),p.jsx("div",{children:p.jsx(bd,{custom:x,mode:"wait",children:p.jsx(pd.div,{custom:x,variants:v,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3},className:"w-full h-full",children:g[t].component()},t)})}),s&&p.jsx(Sd,{mp3:s,onClose:()=>a(null),nextTrack:T,toast:_t})]})},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Vf},Symbol.toStringTag,{value:"Module"}));export{Cs as A,Pa as B,Ld as C,va as D,G as E,Ma as F,Gf as G,_s as H,_d as I,xe as J,qf as K,Ia as L,Fh as M,ha as N,Uh as O,As as P,zh as Q,Zf as R,N as S,mi as T,yt as U,Yf as V,jh as W,Yd as X,Jf as Y,ve as a,Ue as b,It as c,ga as d,pi as e,R as f,ka as g,$f as h,Hf as i,pa as j,ae as k,Le as l,_h as m,jd as n,di as o,Od as p,Nd as q,fa as r,Kf as s,$d as t,Xf as u,Gd as v,Vd as w,Ss as x,ma as y,hi as z};
